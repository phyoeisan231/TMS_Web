"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[569],{2569:(J,v,s)=>{s.r(v),s.d(v,{DocumentSettingComponent:()=>q});var S=s(7037),r=s(9417),b=s(8032),c=s.n(b),y=s(2265),u=s(9437),m=s(7673),w=s(7468),e=s(3953),C=s(1626),p=s(2525);const h={headers:new C.Lr({"Content-Type":"application/json"})};let j=(()=>{class o{constructor(t){this.http=t}getDocumentSettings(t){return this.http.get(p.c.url+"Master/GetDocumentSettingList/?active="+t)}getCategoryList(t){return this.http.get(p.c.url+"Master/GetPCategoryList/?active="+t)}createDocumentSetting(t){return this.http.post(p.c.url+"Master/SaveDocumentSetting",t,h)}updateDocumentSetting(t){return this.http.put(p.c.url+"Master/UpdateDocumentSetting/",t,h)}deleteDocumentSetting(t){return this.http.delete(p.c.url+"Master/DeleteDocumentSetting/"+t,h)}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(C.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var D=s(6554),x=s(177),g=s(8578),E=s(4088),T=s(7808),F=s(5029);const k=["Grid"],N=()=>({text:"categoryName",value:"pcCode"});function I(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function _(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function G(o,a){if(1&o&&e.DNE(0,I,2,0,"div",26)(1,_,2,0,"ng-template",null,3,e.C5r),2&o){const t=a.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",i)}}function R(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function B(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function L(o,a){if(1&o&&e.DNE(0,R,2,0,"div",26)(1,B,2,0,"ng-template",null,3,e.C5r),2&o){const t=a.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.isInDoc)("ngIfElse",i)}}function Y(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function M(o,a){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function O(o,a){if(1&o&&e.DNE(0,Y,2,0,"div",26)(1,M,2,0,"ng-template",null,3,e.C5r),2&o){const t=a.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.isOutDoc)("ngIfElse",i)}}function $(o,a){1&o&&(e.j41(0,"div",43),e.nrm(1,"br")(2,"ejs-checkbox",44),e.k0s()),2&o&&(e.R7$(2),e.Y8G("checked",!0))}function A(o,a){if(1&o&&(e.j41(0,"form",27)(1,"div",6)(2,"div",28)(3,"label",29),e.EFF(4,"Document Code"),e.k0s(),e.nrm(5,"ejs-textbox",30),e.j41(6,"div")(7,"label",31),e.EFF(8,"*This field is required"),e.k0s()()()(),e.j41(9,"div",6)(10,"div",28)(11,"label",32),e.EFF(12,"Document Name"),e.k0s(),e.nrm(13,"ejs-textbox",33),e.j41(14,"div")(15,"label",34),e.EFF(16,"*This field is required"),e.k0s()()()(),e.j41(17,"div",6)(18,"div",28)(19,"label",35),e.EFF(20,"Category Code"),e.k0s(),e.nrm(21,"ejs-dropdownlist",36),e.j41(22,"div")(23,"label",37),e.EFF(24,"*This field is required"),e.k0s()()()(),e.j41(25,"div",6)(26,"div",38),e.nrm(27,"br")(28,"ejs-checkbox",39),e.k0s(),e.j41(29,"div",38),e.nrm(30,"br")(31,"ejs-checkbox",40),e.k0s(),e.j41(32,"div",38),e.nrm(33,"br")(34,"ejs-checkbox",41),e.k0s()(),e.j41(35,"div",6),e.DNE(36,$,3,1,"div",42),e.k0s()()),2&o){const t=a.$implicit,i=e.XpG();e.Y8G("formGroup",i.docForm),e.R7$(5),e.Y8G("readonly",!t.isAdd),e.R7$(),e.xc7("visibility",i.validateControl("docCode")?"visible":"hidden"),e.R7$(8),e.xc7("visibility",i.validateControl("docName")?"visible":"hidden"),e.R7$(7),e.Y8G("dataSource",i.categoryList)("fields",e.lJ4(14,N)),e.R7$(),e.xc7("visibility",i.validateControl("pcCode")?"visible":"hidden"),e.R7$(6),e.Y8G("checked",!0),e.R7$(3),e.Y8G("checked",!0),e.R7$(3),e.Y8G("checked",!0),e.R7$(2),e.Y8G("ngIf",!t.isAdd)}}let q=(()=>{class o{constructor(t,i){this.service=t,this.spinner=i,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete","ExcelExport","Search"],this.lines="Both",this.categoryList=[],this.submitClicked=!1,this.data=[],this.formatfilter="dd-MMM-yyyy",this.today=new Date}ngOnInit(){this.loadTableData()}rowDataBound(t){t.row&&1!=t.data.active&&t.row.classList.add("not-Use")}loadTableData(){this.spinner.show(),(0,w.p)({documents:this.service.getDocumentSettings("All").pipe((0,u.W)(t=>(0,m.of)(this.showError(t)))),categories:this.service.getCategoryList("true").pipe((0,u.W)(t=>(0,m.of)([])))}).subscribe({next:({documents:t,categories:i})=>{this.docSettingList=t,this.grid.dataSource=this.docSettingList,this.grid.searchSettings.operator="equal",this.categoryList=i},error:t=>{console.error("Error loading data",t)},complete:()=>{this.spinner.hide()}})}actionBegin(t){if(("add"===t.requestType||"beginEdit"===t.requestType)&&(this.submitClicked=!1,this.docForm=this.createFormGroup(t.rowData)),"save"===t.requestType)if(this.submitClicked=!0,this.docForm.valid){let i=this.docForm.value;i.docCode=i.docCode.toUpperCase(),"add"===t.action?(i.createdUser=localStorage.getItem("currentUser"),this.addDocSetting(i)):(i.updatedUser=localStorage.getItem("currentUser"),this.updateDocSetting(i))}else t.cancel=!0;"delete"===t.requestType&&(t.cancel=!0,this.deleteDocumentSettings(t.data[0].docCode))}actionComplete(t){("beginEdit"===t.requestType||"add"===t.requestType)&&(t.dialog.header="add"===t.requestType?"New Document Setting":"Edit Document Setting",y.Browser.isDevice&&(t.dialog.height=window.innerHeight-90+"px",t.dialog.dataBind()))}createFormGroup(t){return new r.gE({docCode:new r.MJ(t.docCode,r.k0.required),docName:new r.MJ(t.docName,r.k0.required),pcCode:new r.MJ(t.pcCode,r.k0.required),attachRequired:new r.MJ(t.attachRequired),active:new r.MJ(t.active),isInDoc:new r.MJ(t.isInDoc),isOutDoc:new r.MJ(t.isOutDoc)})}addDocSetting(t){this.spinner.show(),t.active=!0,t.attachRequired=!!t.attachRequired,t.isInDoc=!!t.isInDoc,t.isOutDoc=!!t.isOutDoc,this.service.createDocumentSetting(t).pipe((0,u.W)(i=>(0,m.of)(this.showError(i)))).subscribe(i=>{1==i.status?(this.spinner.hide(),c().fire("Document Setting",i.messageContent,"success"),this.loadTableData()):(this.spinner.hide(),this.grid.dataSource=this.docSettingList.filter(n=>null!=n.docCode),c().fire("Document Setting",i.messageContent,"error"))})}updateDocSetting(t){this.spinner.show(),t.active=!!t.active,t.attachRequired=!!t.attachRequired,t.isInDoc=!!t.isInDoc,t.isOutDoc=!!t.isOutDoc,this.service.updateDocumentSetting(t).pipe((0,u.W)(i=>(0,m.of)(this.showError(i)))).subscribe(i=>{this.loadTableData(),1==i.status?this.showSuccess(i.messageContent):(this.spinner.hide(),c().fire("Document Setting",i.messageContent,"error"))})}deleteDocumentSettings(t){c().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(i=>{i.value?(this.spinner.show(),this.service.deleteDocumentSetting(t).pipe((0,u.W)(n=>(0,m.of)(this.showError(n)))).subscribe(n=>{1==n.status?(this.showSuccess(n.messageContent),this.loadTableData()):(this.spinner.hide(),c().fire("Document Setting",n.messageContent,"error"))})):i.dismiss===c().DismissReason.cancel&&c().close()})}validateControl(t){const i=this.docForm.get(t);return i.invalid&&(i.dirty||i.touched)||i.invalid&&this.submitClicked}showSuccess(t){this.spinner.hide(),c().fire("Document Setting",t,"success")}showError(t){this.spinner.hide(),c().fire("Document Setting",t.statusText,"error")}toolbarClick(t){"Excel Export"===t.item.text&&this.grid.excelExport({fileName:"DocumentSettingReport.xlsx"})}exportQueryCellInfo(t){""===t.column.headerText&&(t.hyperLink={target:t.data,displayText:t.data})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(j),e.rXU(D.ex))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-document-setting"]],viewQuery:function(i,n){if(1&i&&e.GBs(k,5),2&i){let l;e.mGM(l=e.lsd())&&(n.grid=l.first)}},standalone:!0,features:[e.aNF],decls:38,vars:11,consts:[["Grid",""],["template",""],["editSettingsTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-12","col-lg-12","text-left"],[1,"card-title"],[3,"actionBegin","actionComplete","toolbarClick","rowDataBound","dataSource","allowResizing","allowSorting","allowPaging","pageSettings","editSettings","allowExcelExport","toolbar","gridLines"],["field","docCode","headerText","Code","width","100",3,"isPrimaryKey"],["field","docName","headerText","Name","width","150"],["field","pcCode","headerText","Category","width","100"],["field","active","headerText","Active","width","100"],["field","isInDoc","headerText","IsInDoc","width","100"],["field","isOutDoc","headerText","IsOutDoc","width","100"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","docCode",1,"font-weight-normal","requiredfield"],["formControlName","docCode","tabindex","1","autocomplete","off",1,"text-uppercase",3,"readonly"],["for","docCode",1,"e-error",2,"display","block"],["for","docName",1,"font-weight-normal","requiredfield"],["formControlName","docName","tabindex","2","autocomplete","off"],["for","docName",1,"e-error",2,"display","block"],[1,"font-weight-normal","requiredfield"],["formControlName","pcCode","placeholder","Select One","autocomplete","off","tabindex","3",3,"dataSource","fields"],["for","pcCode",1,"e-error",2,"display","block"],[1,"form-group","col-md-4"],["formControlName","isInDoc","label","IsInDoc","floatLabelType","Always","tabindex","4",3,"checked"],["formControlName","isOutDoc","label","IsOutDoc","floatLabelType","Always","tabindex","5",3,"checked"],["formControlName","attachRequired","label","AttachRequired","floatLabelType","Always","tabindex","6",3,"checked"],["class","form-group col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["formControlName","active","label","Active","floatLabelType","Always","tabindex","7",3,"checked"]],template:function(i,n){if(1&i){const l=e.RV6();e.j41(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"ol",8)(5,"li",9)(6,"a",10),e.nrm(7,"i",11),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",12),e.EFF(10,"Document Setting"),e.k0s()()()(),e.j41(11,"div",6)(12,"div",13)(13,"div",14)(14,"div",6)(15,"div",15)(16,"h5",16),e.EFF(17,"Document Setting"),e.k0s()()(),e.j41(18,"ejs-grid",17,0),e.bIt("actionBegin",function(d){return e.eBV(l),e.Njj(n.actionBegin(d))})("actionComplete",function(d){return e.eBV(l),e.Njj(n.actionComplete(d))})("toolbarClick",function(d){return e.eBV(l),e.Njj(n.toolbarClick(d))})("rowDataBound",function(d){return e.eBV(l),e.Njj(n.rowDataBound(d))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",18)(22,"e-column",19)(23,"e-column",20),e.j41(24,"e-column",21),e.DNE(25,G,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(27,"e-column",22),e.DNE(28,L,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(30,"e-column",23),e.DNE(31,O,3,2,"ng-template",null,1,e.C5r),e.k0s()(),e.DNE(33,A,37,15,"ng-template",null,2,e.C5r),e.k0s()()()()()(),e.j41(35,"ngx-spinner",24)(36,"p",25),e.EFF(37," Loading... "),e.k0s()()}2&i&&(e.R7$(18),e.Y8G("dataSource",n.data)("allowResizing",!0)("allowSorting",!0)("allowPaging",!0)("pageSettings",n.pageSettings)("editSettings",n.editSettings)("allowExcelExport",!0)("toolbar",n.toolbar)("gridLines",n.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(14),e.Y8G("fullScreen",!0))},dependencies:[S.f,x.bT,r.qT,r.BC,r.cb,r.j4,r.JD,g._ab,g.eeu,g.rFS,g.LGG,g.cvh,E.V9,T.OV,F.$W,D.et],styles:[".e-checkbox-wrapper[_ngcontent-%COMP%]   .e-label[_ngcontent-%COMP%]{font-weight:550!important}"]})}return o})()}}]);