"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[236],{6236:(W,p,n)=>{n.r(p),n.d(p,{TruckComponent:()=>P});var u=n(9437),f=n(7673),D=n(8032),c=n.n(D),C=n(7037),l=n(9417),g=n(7586),e=n(3953),v=n(1626),k=n(2525);const b={headers:new v.Lr({"Content-Type":"application/json"})};let y=(()=>{class o{constructor(t){this.http=t}getTruckList(){return this.http.get(k.c.url+"Master/GetTruckList")}onBlackForm(t){return this.http.put(k.c.url+"Master/BlackFormForTruck/",t,b)}deleteTruck(t){return this.http.delete(k.c.url+"Master/DeleteTruck/"+t,b)}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(v.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var T=n(6554),j=n(3782),B=n(177),d=n(8578),F=n(3924),w=n(6674),R=n(5029);const E=["Grid"],x=["blackModal"];function _(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function N(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function S(o,r){if(1&o&&e.DNE(0,_,2,0,"div",39)(1,N,2,0,"ng-template",null,5,e.C5r),2&o){const t=r.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.isBlack)("ngIfElse",i)}}function I(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function M(o,r){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function G(o,r){if(1&o&&e.DNE(0,I,2,0,"div",39)(1,M,2,0,"ng-template",null,5,e.C5r),2&o){const t=r.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",i)}}function Y(o,r){1&o&&(e.j41(0,"div",40),e.EFF(1,"Is Black Form"),e.k0s())}function L(o,r){1&o&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Black Date"),e.k0s(),e.nrm(3,"ejs-datepicker",43),e.k0s())}function V(o,r){1&o&&(e.j41(0,"div",41)(1,"label",44),e.EFF(2,"Black Removed Date"),e.k0s(),e.nrm(3,"ejs-datepicker",45),e.k0s())}function $(o,r){1&o&&(e.j41(0,"div",41)(1,"label",46),e.EFF(2,"Black Reason"),e.k0s(),e.nrm(3,"textarea",47),e.k0s())}function A(o,r){1&o&&(e.j41(0,"div",41)(1,"label",48),e.EFF(2,"Black Removed Reason"),e.k0s(),e.nrm(3,"textarea",49),e.k0s())}function J(o,r){if(1&o){const t=e.RV6();e.j41(0,"button",50),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onBlackFormSubmit())}),e.EFF(1,"Save"),e.k0s(),e.j41(2,"button",51),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.hideDialog())}),e.EFF(3,"Cancel"),e.k0s()}}let P=(()=>{class o{constructor(t,i,a){this.service=t,this.spinner=i,this.router=a,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!1,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=[{text:"Add",tooltipText:"Add",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"e-edit",id:"edit"},{text:"IsBlack",tooltipText:"IsBlack",prefixIcon:"e-circle-check",id:"isblack"},"Delete","Search"],this.lines="Both",this.truckTypeList=[],this.truckList=[],this.format={type:"date",format:"dd/MM/yyyy"},this.isBlack=!0,this.isShow=!0,this.today=new Date,this.submitClicked=!1}ngOnInit(){this.blackForm=new l.gE({vehicleRegNo:new l.MJ(""),isBlack:new l.MJ(!1),blackReason:new l.MJ(""),blackDate:new l.MJ(this.today),blackRemovedReason:new l.MJ(""),blackRemovedDate:new l.MJ(this.today)}),this.loadTableData()}rowDataBound(t){t.row&&1==t.data.isBlack&&t.row.classList.add("not-Use")}loadTableData(){this.spinner.show(),this.service.getTruckList().pipe((0,u.W)(t=>(0,f.of)(this.showError(t)))).subscribe(t=>{this.grid.dataSource=t,this.grid.searchSettings.operator="equal",this.spinner.hide()})}actionBegin(t){"delete"===t.requestType&&(t.cancel=!0,this.deleteTruck(t.data[0].vehicleRegNo))}deleteTruck(t){c().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(i=>{i.value?(this.spinner.show(),this.service.deleteTruck(t).pipe((0,u.W)(a=>(0,f.of)(this.showError(a)))).subscribe(a=>{1==a.status?(this.showSuccess(a.messageContent),this.loadTableData()):(this.spinner.hide(),c().fire("Truck",a.messageContent,"error"))})):i.dismiss===c().DismissReason.cancel&&c().close()})}openDialog(){this.blackModal.show()}hideDialog(){this.blackModal.hide()}onBlackFormSubmit(){this.spinner.show();const t=this.blackForm.value;t.isBlack=!!t.isBlack,1==t.isBlack?(t.blackRemovedDate=null,t.blackRemovedReason=null,t.blackReason=t.blackReason,t.blackDate=g(t.blackDate).format("MM/DD/YYYY HH:mm:ss")):(t.blackDate=null,t.blackReason=null,t.blackRemovedReason=t.blackRemovedReason,t.blackRemovedDate=g(t.blackRemovedDate).format("MM/DD/YYYY HH:mm:ss")),this.hideDialog(),console.log(t),this.service.onBlackForm(t).pipe((0,u.W)(i=>(0,f.of)(this.showError(i)))).subscribe(i=>{1==i.status?(c().fire("Truck Black Form",i.messageContent,"success"),this.loadTableData()):c().fire("Truck Black Form",i.messageContent,"error")}),this.spinner.hide()}showSuccess(t){this.spinner.hide(),c().fire("Truck",t,"success")}showError(t){this.spinner.hide(),c().fire("Truck",t.statusText,"error")}validateControl(t){const i=this.truckForm.get(t);return i.invalid&&(i.dirty||i.touched)||i.invalid&&this.submitClicked}toolbarClick(t){if("Excel Export"===t.item.text)this.grid.excelExport();else if("add"===t.item.id)this.router.navigate(["master/truck-detail"],{queryParams:{id:null},skipLocationChange:!0});else if("edit"===t.item.id||"isblack"===t.item.id){let a=this.grid.getSelectedRecords();if(0==a.length)c().fire("Truck","Please select one row!","warning");else{var i=a[0].vehicleRegNo;if("edit"===t.item.id)this.router.navigate(["master/truck-detail"],{queryParams:{id:i},skipLocationChange:!0});else if("isblack"===t.item.id){this.blackForm.reset();const s=a[0].isBlack;this.blackForm.controls.vehicleRegNo.setValue(i),this.blackForm.controls.isBlack.setValue(s),this.isShow=1!=s,this.blackModal.show()}}}}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(y),e.rXU(T.ex),e.rXU(j.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-truck"]],viewQuery:function(i,a){if(1&i&&(e.GBs(E,5),e.GBs(x,5)),2&i){let s;e.mGM(s=e.lsd())&&(a.grid=s.first),e.mGM(s=e.lsd())&&(a.blackModal=s.first)}},standalone:!0,features:[e.aNF],decls:58,vars:15,consts:[["Grid",""],["template",""],["blackModal",""],["header",""],["footerTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","true"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[3,"actionBegin","toolbarClick","rowDataBound","allowSorting","allowPaging","pageSettings","editSettings","toolbar","gridLines"],["field","vehicleRegNo","headerText","RegNo","width","150",3,"isPrimaryKey"],["field","truckWeight","headerText","TruckWeight","width","200"],["field","typeID","headerText","Truck TypeID","width","150"],["field","transporterID","headerText","Transporter ID","width","150"],["field","createdDate","headerText","Created Date","type","date","format","dd-MM-yyyy","width","130"],["field","isBlack","headerText","IsBlack","width","90"],["field","active","headerText","Active","width","100"],["isModal","true","width","480px","allowDragging","true",3,"showCloseIcon","visible"],[3,"ngSubmit","formGroup"],["hidden","",1,"form-group","col-md-12"],[1,"e-float-input","e-control-wrapper"],["formControlName","vehicleRegNo","type","text","readonly","true","autocomplete","off"],[1,"e-float-line"],["for","vehicleRegNo",1,"e-float-text","e-label-top"],[1,"row","my-0"],[1,"form-group","col-md-6"],["formControlName","isBlack","label","IsBlack","floatLabelType","Always","tabindex","1",1,"font-weight-normal",3,"checked"],["class","form-group col-md-12",4,"ngIf"],["type","ball-scale-multiple"],[4,"ngIf","ngIfElse"],[1,"font-weight-bold"],[1,"form-group","col-md-12"],["for","blackDate"],["formControlName","blackDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["for","blackRemovedDate"],["formControlName","blackRemovedDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["for","blackReason"],["formControlName","blackReason","autocomplete","off","tabindex","3",1,"form-control","form-control-sm"],["for","blackRemovedReason"],["formControlName","blackRemovedReason","autocomplete","off","tabindex","4",1,"form-control","form-control-sm"],["type","submit","ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-primary","e-flat",3,"click"],["ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-flat",3,"click"]],template:function(i,a){if(1&i){const s=e.RV6();e.j41(0,"section",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"ol",10)(5,"li",11)(6,"a",12),e.nrm(7,"i",13),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",14),e.EFF(10,"Truck"),e.k0s()()()(),e.j41(11,"div",8)(12,"div",15)(13,"div",16)(14,"div",8)(15,"div",17)(16,"h5",18),e.EFF(17,"Truck"),e.k0s()()(),e.j41(18,"ejs-grid",19,0),e.bIt("actionBegin",function(m){return e.eBV(s),e.Njj(a.actionBegin(m))})("toolbarClick",function(m){return e.eBV(s),e.Njj(a.toolbarClick(m))})("rowDataBound",function(m){return e.eBV(s),e.Njj(a.rowDataBound(m))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",20)(22,"e-column",21)(23,"e-column",22)(24,"e-column",23)(25,"e-column",24),e.j41(26,"e-column",25),e.DNE(27,S,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(29,"e-column",26),e.DNE(30,G,3,2,"ng-template",null,1,e.C5r),e.k0s()()()()()()()(),e.j41(32,"ejs-dialog",27,2),e.DNE(34,Y,2,0,"ng-template",null,3,e.C5r),e.j41(36,"form",28),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(a.onBlackFormSubmit())}),e.j41(37,"div",29)(38,"div",30),e.nrm(39,"input",31)(40,"span",32),e.j41(41,"label",33),e.EFF(42,"VehicleRegNo"),e.k0s()()(),e.j41(43,"div",34)(44,"div",35),e.nrm(45,"br")(46,"ejs-checkbox",36),e.k0s()(),e.j41(47,"div",8),e.DNE(48,L,4,0,"div",37),e.k0s(),e.j41(49,"div",8),e.DNE(50,V,4,0,"div",37),e.k0s(),e.j41(51,"div",8),e.DNE(52,$,4,0,"div",37),e.k0s(),e.j41(53,"div",8),e.DNE(54,A,4,0,"div",37),e.k0s(),e.DNE(55,J,4,0,"ng-template",null,4,e.C5r),e.k0s()(),e.nrm(57,"ngx-spinner",38)}2&i&&(e.R7$(18),e.Y8G("allowSorting",!0)("allowPaging",!0)("pageSettings",a.pageSettings)("editSettings",a.editSettings)("toolbar",a.toolbar)("gridLines",a.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(11),e.Y8G("showCloseIcon",!0)("visible",!1),e.R7$(4),e.Y8G("formGroup",a.blackForm),e.R7$(10),e.Y8G("checked",!0),e.R7$(2),e.Y8G("ngIf",a.isShow),e.R7$(2),e.Y8G("ngIf",!a.isShow),e.R7$(2),e.Y8G("ngIf",a.isShow),e.R7$(2),e.Y8G("ngIf",!a.isShow))},dependencies:[C.f,B.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,d._ab,d.eeu,d.rFS,d.LGG,d.cvh,F.I,w.mq,R.$W,T.et]})}return o})()}}]);