"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[101],{9101:(A,h,n)=>{n.r(h),n.d(h,{TruckDetailComponent:()=>G});var i=n(9417),d=n(9437),m=n(7673),v=n(8032),l=n.n(v),f=n(7037),e=n(3953),T=n(345),u=n(1626),a=n(2525);new u.Lr({"Content-Type":"application/json"});let g=(()=>{class o{constructor(t,s){this.injector=t,this.http=s}createTruck(t){return this.http.post(a.c.url+"Master/SaveTruck/",t)}getTruckTypes(t){return this.http.get(`${a.c.url}Master/GetTruckTypeList`,{params:t?{active:t}:{}})}getDriverList(t,s){const r=(new u.Nl).set("active",t).set("isBlack",s);return this.http.get(a.c.url+"Master/GetDriverList",{params:r})}getTransporterList(t,s){const r=(new u.Nl).set("active",t).set("isBlack",s);return this.http.get(`${a.c.url}Master/GetTransporterList`,{params:r})}getTruckId(t){return this.http.get(a.c.url+"Master/GetTruckId/?id="+t)}updateTruck(t){return this.http.put(a.c.url+"Master/UpdateTruck/",t)}static#e=this.\u0275fac=function(s){return new(s||o)(e.KVO(e.zZn),e.KVO(u.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var F=n(6554),k=n(3782),b=n(177),N=n(4088),p=n(7808),y=n(5029);const D=()=>({text:"description",value:"typeID"}),I=()=>({text:"transporterName",value:"transporterID"}),C=()=>({text:"driverName",value:"licenseNo"});function R(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.saveTruck())}),e.nrm(1,"i",36),e.EFF(2," \xa0Save"),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("disabled",!t.truckForm.valid)}}function j(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.saveTruck())}),e.nrm(1,"i",36),e.EFF(2," \xa0Update"),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("disabled",!t.truckForm.valid)}}function L(o,c){1&o&&(e.j41(0,"label",28),e.EFF(1,"Vehicle Reg No."),e.k0s())}function E(o,c){1&o&&(e.j41(0,"label",28),e.EFF(1,"Vehicle Reg No."),e.k0s())}function x(o,c){1&o&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function w(o,c){1&o&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function S(o,c){1&o&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function B(o,c){1&o&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}let G=(()=>{class o{constructor(t,s,r,V,M){this._sanitizer=t,this.service=s,this.spinner=r,this.route=V,this.router=M,this.isAdd=!0,this.truckTypeList=[],this.transporterNames=[],this.containerSizeList=[20,40,45],this.containerTypeList=["DV","FR","GP","HC","HQ","HG","OS","OT","PF","RF","RH","TK","IC","FL","BC","HT","VC","PL"],this.formatfilter="dd-MMM-yyyy",this.today=new Date}ngOnInit(){this.breadCrumbItems=[{label:"Truck List",routerLink:"/truck-detail",active:!1},{label:"Add New Truck",active:!0}],this.id=this.route.snapshot.queryParams.id,this.truckForm=new i.gE({vehicleRegNo:new i.MJ({value:this.id,disabled:!!this.id},i.k0.required),containerType:new i.MJ(""),containerSize:new i.MJ(""),truckWeight:new i.MJ(""),typeID:new i.MJ("",i.k0.required),transporterID:new i.MJ("",i.k0.required),active:new i.MJ(!1),isBlack:new i.MJ(""),driverLicenseNo:new i.MJ(""),vehicleBackRegNo:new i.MJ(""),remarks:new i.MJ("")}),null!=this.id&&null!=this.id&&this.getTruckById(),this.service.getTruckTypes("true").subscribe({next:t=>{this.truckTypeList=t},error:t=>{console.error("Error loading truck types",t)}}),this.service.getDriverList("true","false").subscribe({next:t=>{console.log("Driver License and Names Loaded:",t),this.driverLicenseNoList=t},error:t=>{console.log("Error Loading Transporter Names",t)}}),this.service.getTransporterList("true","false").subscribe({next:t=>{console.log("Transporter Names Loaded:",t),this.transporterNames=t},error:t=>{console.log("Error Loading Transporter Names",t)}})}getTruckById(){this.spinner.show(),this.service.getTruckId(this.id).pipe((0,d.W)(t=>(0,m.of)(this.showError(t)))).subscribe(t=>{this.truckForm.controls.vehicleRegNo.setValue(t.vehicleRegNo),this.truckForm.controls.containerType.setValue(t.containerType),this.truckForm.controls.containerSize.setValue(t.containerSize),this.truckForm.controls.truckWeight.setValue(t.truckWeight),this.truckForm.controls.typeID.setValue(t.typeID),this.truckForm.controls.transporterID.setValue(t.transporterID),this.truckForm.controls.active.setValue(t.active),this.truckForm.controls.isBlack.setValue(t.isBlack),this.truckForm.controls.driverLicenseNo.setValue(t.driverLicenseNo),this.truckForm.controls.vehicleBackRegNo.setValue(t.vehicleBackRegNo),this.truckForm.controls.remarks.setValue(t.remarks),this.isAdd=!1,this.breadCrumbItems=[{label:"Truck",rounterLink:"/truck-detail",active:!1},{label:"Edit Truck",active:!0}],this.spinner.hide()})}saveTruck(){const t=this.truckForm.value;this.isAdd?(t.createdUser=localStorage.getItem("currentUser"),t.vehicleRegNo=t.vehicleRegNo.toUpperCase(),t.vehicleBackRegNo=t.vehicleBackRegNo.toUpperCase(),t.isBlack=t.isBlack,this.addNewTruck(t)):(t.updatedUser=localStorage.getItem("currentUser"),this.editTruck(t))}navigateToTruck(){this.router.navigate(["master/truck"])}addNewTruck(t){this.spinner.show(),this.service.createTruck({VehicleRegNo:t.vehicleRegNo,ContainerType:t.containerType,ContainerSize:t.containerSize,TruckWeight:t.truckWeight,TypeID:t.typeID,TransporterID:t.transporterID,Active:t.active,DriverLicenseNo:t.driverLicenseNo,VehicleBackRegNo:t.vehicleBackRegNo??"",Remarks:t.remarks??"",IsBlack:t.isBlack}).pipe((0,d.W)(r=>(this.spinner.hide(),this.showError(r),(0,m.of)({status:!1,messageContent:"An error occurred while adding the truck."})))).subscribe(r=>{this.spinner.hide(),r.status?(this.showSuccess("Truck Added Successfully!"),this.router.navigate(["master/truck"])):l().fire("Truck",r.messageContent,"error")})}editTruck(t){this.spinner.show(),this.service.updateTruck({VehicleRegNo:this.id,ContainerType:t.containerType,ContainerSize:t.containerSize??"",TruckWeight:t.truckWeight??"",TypeID:t.typeID,TransporterID:t.transporterID,Active:t.active,IsBlack:t.isBlack,DriverLicenseNo:t.driverLicenseNo,VehicleBackRegNo:t.vehicleBackRegNo??"",Remarks:t.remarks??""}).pipe((0,d.W)(r=>(this.spinner.hide(),this.showError(r),(0,m.of)({status:!1,messageContent:"An error occurred while updating the truck."})))).subscribe(r=>{this.spinner.hide(),r.status?(this.showSuccess("Truck Updated Successfully!"),this.router.navigate(["master/truck"])):l().fire("Truck",r.messageContent,"error")})}showSuccess(t){l().fire("Truck",t,"success")}showError(t){l().fire("Truck",t.statusText,"error")}static#e=this.\u0275fac=function(s){return new(s||o)(e.rXU(T.up),e.rXU(g),e.rXU(F.ex),e.rXU(k.nX),e.rXU(k.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-truck-detail"]],standalone:!0,features:[e.aNF],decls:74,vars:24,consts:[[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[1,"col-md-6","col-lg-6","text-end"],["type","submit","class","btn btn-sm btn-primary mr-2 ",3,"disabled","click",4,"ngIf"],["routerLink","master/truck","href","master/truck",1,"btn","btn-sm","btn-secondary","m-1"],[1,"fa","fa-arrow-circle-left"],[1,"row","my-0"],[1,"form-group","col-md-4"],["class","font-weight-normal requiredfield",4,"ngIf"],["formControlName","vehicleRegNo","tabindex","0","maxlength","50",1,"text-uppercase"],[4,"ngIf"],[1,"font-weight-normal"],["formControlName","vehicleBackRegNo","autocomplete","off","tabindex","1","maxlength","100",1,"text-uppercase"],["formControlName","containerType","placeholder","Choose Container Type","autocomplete","off","tabindex","2","maxlength","100",3,"dataSource"],[1,"row","mt-2"],["formControlName","containerSize","autocomplete","off","placeholder","Choose Container Size","tabindex","3","maxlength","100",3,"dataSource"],[1,"font-weight-normal","requiredfield"],["formControlName","typeID","autocomplete","off","placeholder","Choose Truck Type","tabindex","4","maxlength","100",3,"dataSource","fields"],["formControlName","truckWeight","placeholder","Enter Truck Weight","autocomplete","off","tabindex","5","maxlength","100",3,"min","max","decimals"],["formControlName","transporterID","autocomplete","off","placeholder","Choose Transporter","tabindex","6","maxlength","100",3,"dataSource","fields"],["formControlName","driverLicenseNo","placeholder","Choose Driver","autocomplete","off","tabindex","7","maxlength","100",3,"dataSource","fields"],["formControlName","remarks","tabindex","8","autocomplete","off","placeholder","Remarks","maxlength","120",1,"form-control","form-control-sm"],["formControlName","active","tabindex","9","label","IsActive",3,"checked"],["type","submit",1,"btn","btn-sm","btn-primary","mr-2",3,"click","disabled"],[1,"fa","fa-save"],[1,"text-danger"]],template:function(s,r){1&s&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ol",4)(5,"li",5)(6,"a",6),e.nrm(7,"i",7),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",5),e.EFF(10,"Truck"),e.k0s(),e.j41(11,"li",8),e.EFF(12,"Truck Info"),e.k0s()()()(),e.j41(13,"div",2)(14,"div",9)(15,"div",10)(16,"form",11)(17,"div",2)(18,"div",12)(19,"h5",13),e.EFF(20,"Truck Info"),e.k0s()(),e.j41(21,"div",14),e.DNE(22,R,3,1,"button",15)(23,j,3,1,"button",15),e.j41(24,"a",16),e.nrm(25,"i",17),e.EFF(26," \xa0 Back "),e.k0s()()(),e.nrm(27,"br"),e.j41(28,"div",18)(29,"div",19),e.DNE(30,L,2,0,"label",20)(31,E,2,0,"label",20),e.nrm(32,"ejs-textbox",21),e.DNE(33,x,3,0,"div",22),e.k0s(),e.j41(34,"div",19)(35,"label",23),e.EFF(36,"Vehicle Back RegNo."),e.k0s(),e.nrm(37,"ejs-textbox",24),e.k0s(),e.j41(38,"div",19)(39,"label",23),e.EFF(40,"Container Type"),e.k0s(),e.nrm(41,"ejs-dropdownlist",25),e.k0s()(),e.j41(42,"div",26)(43,"div",19)(44,"label",23),e.EFF(45,"Container Size"),e.k0s(),e.nrm(46,"ejs-dropdownlist",27),e.k0s(),e.j41(47,"div",19)(48,"label",28),e.EFF(49,"Truck Type"),e.k0s(),e.nrm(50,"ejs-dropdownlist",29),e.DNE(51,w,3,0,"div",22),e.k0s(),e.j41(52,"div",19)(53,"label",23),e.EFF(54,"Truck Weight"),e.k0s(),e.nrm(55,"ejs-numerictextbox",30),e.k0s()(),e.j41(56,"div",26)(57,"div",19)(58,"label",28),e.EFF(59,"Transporter"),e.k0s(),e.nrm(60,"ejs-dropdownlist",31),e.DNE(61,S,3,0,"div",22),e.k0s(),e.j41(62,"div",19)(63,"label",23),e.EFF(64,"Driver"),e.k0s(),e.nrm(65,"ejs-dropdownlist",32),e.DNE(66,B,3,0,"div",22),e.k0s(),e.j41(67,"div",19)(68,"label",23),e.EFF(69,"Remarks"),e.k0s(),e.nrm(70,"textarea",33),e.k0s()(),e.j41(71,"div",26)(72,"div",19),e.nrm(73,"ejs-checkbox",34),e.k0s()()()()()()()()),2&s&&(e.R7$(16),e.Y8G("formGroup",r.truckForm),e.R7$(6),e.Y8G("ngIf",r.isAdd),e.R7$(),e.Y8G("ngIf",!r.isAdd),e.R7$(7),e.Y8G("ngIf",r.isAdd),e.R7$(),e.Y8G("ngIf",!r.isAdd),e.R7$(2),e.Y8G("ngIf",r.truckForm.controls.vehicleRegNo.invalid&&(r.truckForm.controls.vehicleRegNo.touched||r.truckForm.controls.vehicleRegNo.dirty)),e.R7$(8),e.Y8G("dataSource",r.containerTypeList),e.R7$(5),e.Y8G("dataSource",r.containerSizeList),e.R7$(4),e.Y8G("dataSource",r.truckTypeList)("fields",e.lJ4(21,D)),e.R7$(),e.Y8G("ngIf",r.truckForm.controls.typeID.invalid&&(r.truckForm.controls.typeID.touched||r.truckForm.controls.typeID.dirty)),e.R7$(4),e.Y8G("min",0)("max",1e5)("decimals",2),e.R7$(5),e.Y8G("dataSource",r.transporterNames)("fields",e.lJ4(22,I)),e.R7$(),e.Y8G("ngIf",r.truckForm.controls.transporterID.invalid&&(r.truckForm.controls.transporterID.touched||r.truckForm.controls.transporterID.dirty)),e.R7$(4),e.Y8G("dataSource",r.driverLicenseNoList)("fields",e.lJ4(23,C)),e.R7$(),e.Y8G("ngIf",r.truckForm.controls.driverLicenseNo.invalid&&(r.truckForm.controls.driverLicenseNo.touched||r.truckForm.controls.driverLicenseNo.dirty)),e.R7$(7),e.Y8G("checked",!0))},dependencies:[f.f,b.bT,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,N.V9,p.Jh,p.OV,y.$W]})}return o})()}}]);