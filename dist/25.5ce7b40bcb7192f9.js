"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[25],{1025:(X,g,r)=>{r.r(g),r.d(g,{DriverComponent:()=>U});var u=r(9437),f=r(7673),C=r(8032),c=r.n(C),j=r(7037),l=r(9417),B=r(7586),k=r.n(B),e=r(3953),v=r(1626),p=r(2525);const b={headers:new v.Lr({"Content-Type":"application/json"})};let F=(()=>{class i{constructor(t){this.http=t}getDriverList(t,o){const n=(new v.Nl).set("active",t).set("isBlack",o);return this.http.get(`${p.c.url}Master/GetDriverList`,{params:n})}onBlackForm(t){return this.http.put(p.c.url+"Master/BlackFormForDriver/",t,b)}deleteDriver(t){const o=encodeURIComponent(t);return this.http.delete(`${p.c.url}Master/DeleteDriver/${o}`,b)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(v.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var D=r(6554),w=r(3782),R=r(177),d=r(8578),T=r(3924),y=r(6674),E=r(5029);const x=["Grid"],N=["blackModal"];function S(i,s){1&i&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function I(i,s){1&i&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function _(i,s){if(1&i&&e.DNE(0,S,2,0,"div",40)(1,I,2,0,"ng-template",null,5,e.C5r),2&i){const t=s.$implicit,o=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",o)}}function M(i,s){1&i&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function G(i,s){1&i&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function Y(i,s){if(1&i&&e.DNE(0,M,2,0,"div",40)(1,G,2,0,"ng-template",null,5,e.C5r),2&i){const t=s.$implicit,o=e.sdS(2);e.Y8G("ngIf",t.isBlack)("ngIfElse",o)}}function L(i,s){1&i&&(e.j41(0,"div",41),e.EFF(1,"Is Black Form"),e.k0s())}function $(i,s){1&i&&(e.j41(0,"div",42)(1,"label",43),e.EFF(2,"Black Date"),e.k0s(),e.nrm(3,"ejs-datepicker",44),e.k0s())}function V(i,s){1&i&&(e.j41(0,"div",42)(1,"label",43),e.EFF(2,"Black Removed Date"),e.k0s(),e.nrm(3,"ejs-datepicker",45),e.k0s())}function A(i,s){1&i&&(e.j41(0,"div",42)(1,"label",43),e.EFF(2,"Black Reason"),e.k0s(),e.nrm(3,"textarea",46),e.k0s())}function J(i,s){1&i&&(e.j41(0,"div",42)(1,"label",43),e.EFF(2,"Black Removed Reason"),e.k0s(),e.nrm(3,"textarea",47),e.k0s())}function P(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onBlackFormSubmit())}),e.EFF(1,"Save"),e.k0s(),e.j41(2,"button",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.hideDialog())}),e.EFF(3,"Cancel"),e.k0s()}}let U=(()=>{class i{constructor(t,o,n){this.service=t,this.spinner=o,this.router=n,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!1,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=[{text:"Add",tooltipText:"Add",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"e-edit",id:"edit"},{text:"IsBlack",tooltipText:"IsBlack",prefixIcon:"e-circle-check",id:"isblack"},"Delete","Search"],this.lines="Both",this.submitClicked=!1,this.isBlack=!0,this.isShow=!0}ngOnInit(){this.blackForm=new l.gE({licenseNo:new l.MJ(""),isBlack:new l.MJ(!1),blackReason:new l.MJ(""),blackDate:new l.MJ(""),blackRemovedReason:new l.MJ(""),blackRemovedDate:new l.MJ("")}),this.loadTableData()}loadTableData(){this.spinner.show(),this.service.getDriverList("All","All").pipe((0,u.W)(t=>(0,f.of)(this.showError(t)))).subscribe(t=>{this.grid.dataSource=t,this.grid.searchSettings.operator="equal",this.spinner.hide()})}rowDataBound(t){t.row&&1==t.data.isBlack&&t.row.classList.add("not-Use")}actionBegin(t){"delete"===t.requestType&&(t.cancel=!0,this.deleteDriver(t.data[0].licenseNo))}deleteDriver(t){c().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(o=>{if(o.value){this.spinner.show();const n=encodeURIComponent(t);this.service.deleteDriver(n).pipe((0,u.W)(a=>(0,f.of)(this.showError(a)))).subscribe(a=>{1==a.status?(this.showSuccess(a.messageContent),this.loadTableData()):(this.spinner.hide(),c().fire("Driver",a.messageContent,"error"))})}else o.dismiss===c().DismissReason.cancel&&c().close()})}showSuccess(t){this.spinner.hide(),c().fire("Driver",t,"success")}showError(t){this.spinner.hide(),c().fire("Driver",t.statusText,"error")}openDialog(){this.blackModal.show()}hideDialog(){this.blackModal.hide()}onBlackFormSubmit(){this.spinner.show();const t=this.blackForm.value;t.isBlack=!!t.isBlack,1==t.isBlack?(t.blackRemovedDate=null,t.blackRemovedReason=null,t.blackReason=t.blackReason,t.blackDate=k()(t.blackDate).format("MM/DD/YYYY")):(t.blackDate=null,t.blackReason=null,t.blackRemovedReason=t.blackRemovedReason,t.blackRemovedDate=k()(t.blackRemovedDate).format("MM/DD/YYYY")),this.hideDialog(),console.log(t),this.service.onBlackForm(t).pipe((0,u.W)(o=>(0,f.of)(this.showError(o)))).subscribe(o=>{1==o.status?(c().fire("Driver Black Form",o.messageContent,"success"),this.loadTableData()):c().fire("Driver Black Form",o.messageContent,"error")}),this.spinner.hide()}toolbarClick(t){if("Excel Export"===t.item.text)this.grid.excelExport();else if("add"===t.item.id)this.router.navigate(["master/driver-detail"],{queryParams:{id:null},skipLocationChange:!0});else if("edit"===t.item.id||"isblack"===t.item.id){let n=this.grid.getSelectedRecords();if(0==n.length)c().fire("Driver","Please select one row!","warning");else{var o=n[0].licenseNo;if("edit"===t.item.id)this.router.navigate(["master/driver-detail"],{queryParams:{id:o},skipLocationChange:!0});else if("isblack"===t.item.id){this.blackForm.reset();const a=n[0].isBlack;this.blackForm.controls.licenseNo.setValue(o),this.blackForm.controls.isBlack.setValue(a),this.isShow=1!=a,this.blackModal.show()}}}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(F),e.rXU(D.ex),e.rXU(w.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-driver"]],viewQuery:function(o,n){if(1&o&&(e.GBs(x,5),e.GBs(N,5)),2&o){let a;e.mGM(a=e.lsd())&&(n.grid=a.first),e.mGM(a=e.lsd())&&(n.blackModal=a.first)}},standalone:!0,features:[e.aNF],decls:60,vars:16,consts:[["Grid",""],["template",""],["blackModal",""],["header",""],["footerTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-12","col-lg-12","text-left"],[1,"card-title"],[3,"actionBegin","toolbarClick","rowDataBound","allowSorting","allowPaging","pageSettings","editSettings","toolbar","gridLines"],["field","licenseNo","headerText","Driver License No.","width","150",3,"isPrimaryKey"],["field","nrc","headerText","NRC","width","150"],["field","name","headerText","Name","width","150"],["field","licenseClass","headerText","License Class","width","140"],["field","address","headerText","Address","width","200"],["field","active","headerText","Active","width","100"],["field","isBlack","headerText","IsBlack","width","90"],["isModal","true","width","480px","allowDragging","true",3,"showCloseIcon","visible"],[3,"ngSubmit","formGroup"],["hidden","",1,"form-group","col-md-12"],[1,"e-float-input","e-control-wrapper"],["formControlName","vehicleRegNo","type","text","readonly","true","autocomplete","off"],[1,"e-float-line"],["for","vehicleRegNo",1,"e-float-text","e-label-top"],[1,"row","my-0"],[1,"form-group","col-md-6"],["formControlName","isBlack","label","IsBlack","floatLabelType","Always","tabindex","1",1,"font-weight-normal",3,"checked"],["class","form-group col-md-12",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],[4,"ngIf","ngIfElse"],[1,"font-weight-bold"],[1,"form-group","col-md-12"],[1,"col"],["formControlName","blackDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackRemovedDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackReason","autocomplete","off","tabindex","3",1,"form-control","form-control-sm"],["formControlName","blackRemovedReason","autocomplete","off","tabindex","4",1,"form-control","form-control-sm"],["type","submit","ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-primary","e-flat",3,"click"],["ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-flat",3,"click"]],template:function(o,n){if(1&o){const a=e.RV6();e.j41(0,"section",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"ol",10)(5,"li",11)(6,"a",12),e.nrm(7,"i",13),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",14),e.EFF(10,"Driver"),e.k0s()()()(),e.j41(11,"div",8)(12,"div",15)(13,"div",16)(14,"div",8)(15,"div",17)(16,"h5",18),e.EFF(17,"Driver"),e.k0s()()(),e.j41(18,"ejs-grid",19,0),e.bIt("actionBegin",function(m){return e.eBV(a),e.Njj(n.actionBegin(m))})("toolbarClick",function(m){return e.eBV(a),e.Njj(n.toolbarClick(m))})("rowDataBound",function(m){return e.eBV(a),e.Njj(n.rowDataBound(m))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",20)(22,"e-column",21)(23,"e-column",22)(24,"e-column",23)(25,"e-column",24),e.j41(26,"e-column",25),e.DNE(27,_,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(29,"e-column",26),e.DNE(30,Y,3,2,"ng-template",null,1,e.C5r),e.k0s()()()()()()()(),e.j41(32,"ejs-dialog",27,2),e.DNE(34,L,2,0,"ng-template",null,3,e.C5r),e.j41(36,"form",28),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.onBlackFormSubmit())}),e.j41(37,"div",29)(38,"div",30),e.nrm(39,"input",31)(40,"span",32),e.j41(41,"label",33),e.EFF(42,"VehicleRegNo"),e.k0s()()(),e.j41(43,"div",34)(44,"div",35),e.nrm(45,"br")(46,"ejs-checkbox",36),e.k0s()(),e.j41(47,"div",8),e.DNE(48,$,4,0,"div",37),e.k0s(),e.j41(49,"div",8),e.DNE(50,V,4,0,"div",37),e.k0s(),e.j41(51,"div",8),e.DNE(52,A,4,0,"div",37),e.k0s(),e.j41(53,"div",8),e.DNE(54,J,4,0,"div",37),e.k0s(),e.DNE(55,P,4,0,"ng-template",null,4,e.C5r),e.k0s()(),e.j41(57,"ngx-spinner",38)(58,"p",39),e.EFF(59," Loading... "),e.k0s()()}2&o&&(e.R7$(18),e.Y8G("allowSorting",!0)("allowPaging",!0)("pageSettings",n.pageSettings)("editSettings",n.editSettings)("toolbar",n.toolbar)("gridLines",n.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(11),e.Y8G("showCloseIcon",!0)("visible",!1),e.R7$(4),e.Y8G("formGroup",n.blackForm),e.R7$(10),e.Y8G("checked",!0),e.R7$(2),e.Y8G("ngIf",n.isShow),e.R7$(2),e.Y8G("ngIf",!n.isShow),e.R7$(2),e.Y8G("ngIf",n.isShow),e.R7$(2),e.Y8G("ngIf",!n.isShow),e.R7$(3),e.Y8G("fullScreen",!0))},dependencies:[j.f,R.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,d._ab,d.eeu,d.rFS,d.LGG,d.cvh,T.I,y.mq,E.$W,D.et]})}return i})()}}]);