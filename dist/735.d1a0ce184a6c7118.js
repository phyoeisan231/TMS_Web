"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[735],{9735:(U,k,n)=>{n.r(k),n.d(k,{TransporterComponent:()=>H});var p=n(9437),u=n(7673),D=n(8032),c=n.n(D),C=n(7037),i=n(9417),j=n(7586),v=n.n(j),e=n(3953),f=n(1626),h=n(2525);const b={headers:new f.Lr({"Content-Type":"application/json"})};let B=(()=>{class o{constructor(t){this.http=t}getTransporterList(t,a){const r=(new f.Nl).set("active",t).set("isBlack",a);return this.http.get(`${h.c.url}Master/GetTransporterList`,{params:r})}onBlackForm(t){return this.http.put(h.c.url+"Master/BlackFormForTransporter/",t,b)}deleteTransporter(t){return this.http.delete(h.c.url+"Master/DeleteTransporter/"+t,b)}static#e=this.\u0275fac=function(a){return new(a||o)(e.KVO(f.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var T=n(6554),w=n(3782),F=n(177),d=n(8578),y=n(3924),x=n(6674),E=n(5029);const I=["Grid"],R=["blackModal"];function S(o,s){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function _(o,s){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function N(o,s){if(1&o&&e.DNE(0,S,2,0,"div",41)(1,_,2,0,"ng-template",null,5,e.C5r),2&o){const t=s.$implicit,a=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",a)}}function M(o,s){1&o&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function G(o,s){1&o&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function Y(o,s){if(1&o&&e.DNE(0,M,2,0,"div",41)(1,G,2,0,"ng-template",null,5,e.C5r),2&o){const t=s.$implicit,a=e.sdS(2);e.Y8G("ngIf",t.isBlack)("ngIfElse",a)}}function L(o,s){1&o&&(e.j41(0,"div",42),e.EFF(1,"Is Black Form"),e.k0s())}function $(o,s){1&o&&(e.j41(0,"div",43)(1,"label",44),e.EFF(2,"Black Date"),e.k0s(),e.nrm(3,"ejs-datepicker",45),e.k0s())}function V(o,s){1&o&&(e.j41(0,"div",43)(1,"label",44),e.EFF(2,"Black Removed Date"),e.k0s(),e.nrm(3,"ejs-datepicker",46),e.k0s())}function A(o,s){1&o&&(e.j41(0,"div",43)(1,"label",44),e.EFF(2,"Black Reason"),e.k0s(),e.nrm(3,"textarea",47),e.k0s())}function J(o,s){1&o&&(e.j41(0,"div",43)(1,"label",44),e.EFF(2,"Black Removed Reason"),e.k0s(),e.nrm(3,"textarea",48),e.k0s())}function P(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",49),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onBlackFormSubmit())}),e.EFF(1,"Save"),e.k0s(),e.j41(2,"button",50),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.hideDialog())}),e.EFF(3,"Cancel"),e.k0s()}}let H=(()=>{class o{constructor(t,a,r){this.service=t,this.spinner=a,this.router=r,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!1,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=[{text:"Add",tooltipText:"Add",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"e-edit",id:"edit"},{text:"IsBlack",tooltipText:"IsBlack",prefixIcon:"e-circle-check",id:"isblack"},"Delete","Search"],this.lines="Both",this.submitClicked=!1,this.isBlack=!0,this.isShow=!0}ngOnInit(){this.blackForm=new i.gE({transporterID:new i.MJ(""),isBlack:new i.MJ(!1),blackReason:new i.MJ(""),blackDate:new i.MJ(""),blackRemovedReason:new i.MJ(""),blackRemovedDate:new i.MJ("")}),this.loadTableData()}rowDataBound(t){t.row&&1==t.data.isBlack&&t.row.classList.add("not-Use")}loadTableData(){this.spinner.show(),this.service.getTransporterList("All","All").pipe((0,p.W)(t=>(0,u.of)(this.showError(t)))).subscribe(t=>{this.grid.dataSource=t,this.grid.searchSettings.operator="equal",this.spinner.hide()})}actionBegin(t){"delete"===t.requestType&&(t.cancel=!0,this.deleteTransporter(t.data[0].transporterID))}deleteTransporter(t){c().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(a=>{a.value?(this.spinner.show(),this.service.deleteTransporter(t).pipe((0,p.W)(r=>(0,u.of)(this.showError(r)))).subscribe(r=>{1==r.status?(this.showSuccess(r.messageContent),this.loadTableData()):(this.spinner.hide(),c().fire("Transporter",r.messageContent,"error"))})):a.dismiss===c().DismissReason.cancel&&c().close()})}showSuccess(t){this.spinner.hide(),c().fire("Transporter",t,"success")}showError(t){this.spinner.hide(),c().fire("Transporter",t.statusText,"error")}openDialog(){this.blackModal.show()}hideDialog(){this.blackModal.hide()}onBlackFormSubmit(){this.spinner.show();const t=this.blackForm.value;t.isBlack=!!t.isBlack,1==t.isBlack?(t.blackRemovedDate=null,t.blackRemovedReason=null,t.blackReason=t.blackReason,t.blackDate=v()(t.blackDate).format("MM/DD/YYYY HH:mm:ss")):(t.blackDate=null,t.blackReason=null,t.blackRemovedReason=t.blackRemovedReason,t.blackRemovedDate=v()(t.blackRemovedDate).format("MM/DD/YYYY HH:mm:ss")),this.hideDialog(),console.log(t),this.service.onBlackForm(t).pipe((0,p.W)(a=>(0,u.of)(this.showError(a)))).subscribe(a=>{1==a.status?(c().fire("Transporter Black Form",a.messageContent,"success"),this.loadTableData()):c().fire("Transporter Black Form",a.messageContent,"error")}),this.spinner.hide()}toolbarClick(t){if("Excel Export"===t.item.text)this.grid.excelExport();else if("add"===t.item.id)this.router.navigate(["master/transporter-detail"],{queryParams:{id:null},skipLocationChange:!0});else if("edit"===t.item.id||"isblack"===t.item.id){let r=this.grid.getSelectedRecords();if(0==r.length)c().fire("Transporter","Please select one row!","warning");else{var a=r[0].transporterID;if("edit"===t.item.id)this.router.navigate(["master/transporter-detail"],{queryParams:{id:a},skipLocationChange:!0});else if("isblack"===t.item.id){this.blackForm.reset();const l=r[0].isBlack;this.blackForm.controls.transporterID.setValue(a),this.blackForm.controls.isBlack.setValue(l),this.isShow=1!=l,this.blackModal.show()}}}}static#e=this.\u0275fac=function(a){return new(a||o)(e.rXU(B),e.rXU(T.ex),e.rXU(w.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-transporter"]],viewQuery:function(a,r){if(1&a&&(e.GBs(I,5),e.GBs(R,5)),2&a){let l;e.mGM(l=e.lsd())&&(r.grid=l.first),e.mGM(l=e.lsd())&&(r.blackModal=l.first)}},standalone:!0,features:[e.aNF],decls:60,vars:15,consts:[["Grid",""],["template",""],["blackModal",""],["header",""],["footerTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","true"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[3,"actionBegin","toolbarClick","rowDataBound","allowSorting","allowPaging","pageSettings","editSettings","toolbar","gridLines"],["field","transporterID","headerText","TCode","width","150",3,"isPrimaryKey"],["field","transporterName","headerText","Transporter Name","width","200"],["field","address","headerText","Address","width","150"],["field","contactNo","headerText","ContactNo.","width","150"],["field","email","headerText","Email","width","150"],["field","typeID","headerText","Transporter Type","width","200"],["field","createdDate","headerText","Created Date","type","date","format","dd-MM-yyyy","width","130"],["field","active","headerText","Active","width","100"],["field","isBlack","headerText","IsBlack","width","90"],["isModal","true","width","480px","allowDragging","true",3,"showCloseIcon","visible"],[3,"ngSubmit","formGroup"],["hidden","",1,"form-group","col-md-12"],[1,"e-float-input","e-control-wrapper"],["formControlName","transporterID","type","text","readonly","true","autocomplete","off"],[1,"e-float-line"],["for","transporterID",1,"e-float-text","e-label-top"],[1,"row","my-0"],[1,"form-group","col-md-6"],["formControlName","isBlack","label","IsBlack","floatLabelType","Always","tabindex","1",1,"font-weight-normal",3,"checked"],["class","form-group col-md-12",4,"ngIf"],["type","ball-scale-multiple"],[4,"ngIf","ngIfElse"],[1,"font-weight-bold"],[1,"form-group","col-md-12"],[1,"col"],["formControlName","blackDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackRemovedDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackReason","autocomplete","off","tabindex","3",1,"form-control","form-control-sm"],["formControlName","blackRemovedReason","autocomplete","off","tabindex","4",1,"form-control","form-control-sm"],["type","submit","ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-primary","e-flat",3,"click"],["ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-flat",3,"click"]],template:function(a,r){if(1&a){const l=e.RV6();e.j41(0,"section",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"ol",10)(5,"li",11)(6,"a",12),e.nrm(7,"i",13),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",14),e.EFF(10,"Transporter"),e.k0s()()()(),e.j41(11,"div",8)(12,"div",15)(13,"div",16)(14,"div",8)(15,"div",17)(16,"h5",18),e.EFF(17,"Transporter"),e.k0s()()(),e.j41(18,"ejs-grid",19,0),e.bIt("actionBegin",function(m){return e.eBV(l),e.Njj(r.actionBegin(m))})("toolbarClick",function(m){return e.eBV(l),e.Njj(r.toolbarClick(m))})("rowDataBound",function(m){return e.eBV(l),e.Njj(r.rowDataBound(m))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",20)(22,"e-column",21)(23,"e-column",22)(24,"e-column",23)(25,"e-column",24)(26,"e-column",25)(27,"e-column",26),e.j41(28,"e-column",27),e.DNE(29,N,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(31,"e-column",28),e.DNE(32,Y,3,2,"ng-template",null,1,e.C5r),e.k0s()()()()()()()(),e.j41(34,"ejs-dialog",29,2),e.DNE(36,L,2,0,"ng-template",null,3,e.C5r),e.j41(38,"form",30),e.bIt("ngSubmit",function(){return e.eBV(l),e.Njj(r.onBlackFormSubmit())}),e.j41(39,"div",31)(40,"div",32),e.nrm(41,"input",33)(42,"span",34),e.j41(43,"label",35),e.EFF(44,"TransporterID"),e.k0s()()(),e.j41(45,"div",36)(46,"div",37),e.nrm(47,"br")(48,"ejs-checkbox",38),e.k0s()(),e.j41(49,"div",8),e.DNE(50,$,4,0,"div",39),e.k0s(),e.j41(51,"div",8),e.DNE(52,V,4,0,"div",39),e.k0s(),e.j41(53,"div",8),e.DNE(54,A,4,0,"div",39),e.k0s(),e.j41(55,"div",8),e.DNE(56,J,4,0,"div",39),e.k0s(),e.DNE(57,P,4,0,"ng-template",null,4,e.C5r),e.k0s()(),e.nrm(59,"ngx-spinner",40)}2&a&&(e.R7$(18),e.Y8G("allowSorting",!0)("allowPaging",!0)("pageSettings",r.pageSettings)("editSettings",r.editSettings)("toolbar",r.toolbar)("gridLines",r.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(13),e.Y8G("showCloseIcon",!0)("visible",!1),e.R7$(4),e.Y8G("formGroup",r.blackForm),e.R7$(10),e.Y8G("checked",!0),e.R7$(2),e.Y8G("ngIf",r.isShow),e.R7$(2),e.Y8G("ngIf",!r.isShow),e.R7$(2),e.Y8G("ngIf",r.isShow),e.R7$(2),e.Y8G("ngIf",!r.isShow))},dependencies:[C.f,F.bT,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,d._ab,d.eeu,d.rFS,d.LGG,d.cvh,y.I,x.mq,E.$W,T.et]})}return o})()}}]);