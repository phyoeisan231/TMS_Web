"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[633],{9633:(W,v,o)=>{o.r(v),o.d(v,{OperationAreaComponent:()=>R});var C=o(7037),n=o(9417),y=o(8032),l=o.n(y),w=o(2265),p=o(9437),u=o(7673),O=o(7468),e=o(3953),A=o(1626),m=o(2525);const f={headers:new A.Lr({"Content-Type":"application/json"})};let x=(()=>{class r{constructor(t){this.http=t}getOperationAreas(t){return this.http.get(m.c.url+"Master/GetOperationAreaList/?active="+t)}getYardList(t){return this.http.get(m.c.url+"Master/GetYardList/?active="+t)}createOperationArea(t){return this.http.post(m.c.url+"Master/SaveOperationArea",t,f)}updateOperationArea(t){return this.http.put(m.c.url+"Master/UpdateOperationArea/",t,f)}deleteOperationArea(t){return this.http.delete(m.c.url+"Master/DeleteOperationArea/"+t,f)}static#e=this.\u0275fac=function(i){return new(i||r)(e.KVO(A.Qq))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var b=o(6554),j=o(177),h=o(8578),D=o(4088),F=o(7808),E=o(5029);const T=["Grid"],I=()=>({text:"yardID",value:"yardID"});function k(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function S(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function N(r,s){if(1&r&&e.DNE(0,k,2,0,"div",26)(1,S,2,0,"ng-template",null,3,e.C5r),2&r){const t=s.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",i)}}function G(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function B(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function L(r,s){if(1&r&&e.DNE(0,G,2,0,"div",26)(1,B,2,0,"ng-template",null,3,e.C5r),2&r){const t=s.$implicit,i=e.sdS(2);e.Y8G("ngIf",t.isWaitingArea)("ngIfElse",i)}}function Y(r,s){1&r&&(e.j41(0,"div",41),e.nrm(1,"br")(2,"ejs-checkbox",44),e.k0s()),2&r&&(e.R7$(2),e.Y8G("checked",!0))}function M(r,s){if(1&r&&(e.j41(0,"form",27)(1,"div",28)(2,"div",29)(3,"label",30),e.EFF(4,"Area ID"),e.k0s(),e.nrm(5,"ejs-textbox",31),e.j41(6,"div")(7,"label",32),e.EFF(8,"*This field is required"),e.k0s()()(),e.j41(9,"div",29)(10,"label",33),e.EFF(11,"Area Name"),e.k0s(),e.nrm(12,"ejs-textbox",34),e.j41(13,"div")(14,"label",35),e.EFF(15,"*This field is required"),e.k0s()()(),e.j41(16,"div",29)(17,"label",36),e.EFF(18,"Yard ID"),e.k0s(),e.nrm(19,"ejs-dropdownlist",37),e.j41(20,"div")(21,"label",38),e.EFF(22,"*This field is required"),e.k0s()()(),e.j41(23,"div",29)(24,"label",36),e.EFF(25,"Group Name"),e.k0s(),e.nrm(26,"ejs-dropdownlist",39),e.j41(27,"div")(28,"label",40),e.EFF(29,"*This field is required"),e.k0s()()(),e.j41(30,"div",6)(31,"div",41),e.nrm(32,"br")(33,"ejs-checkbox",42),e.k0s(),e.DNE(34,Y,3,1,"div",43),e.k0s()()()),2&r){const t=s.$implicit,i=e.XpG();e.Y8G("formGroup",i.opForm),e.R7$(5),e.Y8G("readonly",!t.isAdd),e.R7$(),e.xc7("visibility",i.validateControl("areaID")?"visible":"hidden"),e.R7$(7),e.xc7("visibility",i.validateControl("name")?"visible":"hidden"),e.R7$(6),e.Y8G("dataSource",i.yardList)("fields",e.lJ4(15,I)),e.R7$(),e.xc7("visibility",i.validateControl("yardID")?"visible":"hidden"),e.R7$(6),e.Y8G("dataSource",i.groupNameList),e.R7$(),e.xc7("visibility",i.validateControl("groupName")?"visible":"hidden"),e.R7$(6),e.Y8G("checked",!0),e.R7$(),e.Y8G("ngIf",!t.isAdd)}}let R=(()=>{class r{constructor(t,i){this.service=t,this.spinner=i,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete","ExcelExport","Search"],this.lines="Both",this.yardList=[],this.groupNameList=["ICD","TMS","Others"],this.submitClicked=!1,this.data=[],this.formatfilter="dd-MMM-yyyy",this.today=new Date}ngOnInit(){this.loadTableData()}rowDataBound(t){t.row&&1!=t.data.active&&t.row.classList.add("not-Use")}loadTableData(){this.spinner.show(),(0,O.p)({opAreas:this.service.getOperationAreas("All").pipe((0,p.W)(t=>(0,u.of)(this.showError(t)))),yards:this.service.getYardList("true").pipe((0,p.W)(t=>(0,u.of)([])))}).subscribe({next:({opAreas:t,yards:i})=>{this.areaList=t,this.grid.dataSource=this.areaList,this.grid.searchSettings.operator="equal",this.yardList=i},error:t=>{console.error("Error loading data",t)},complete:()=>{this.spinner.hide()}})}actionBegin(t){if(("add"===t.requestType||"beginEdit"===t.requestType)&&(this.submitClicked=!1,this.opForm=this.createFormGroup(t.rowData)),"save"===t.requestType)if(this.submitClicked=!0,this.opForm.valid){let i=this.opForm.value;i.areaID=i.areaID.toUpperCase(),"add"===t.action?(i.createdUser=localStorage.getItem("currentUser"),this.addOperationArea(i)):(i.updatedUser=localStorage.getItem("currentUser"),this.editOperationArea(i))}else t.cancel=!0;"delete"===t.requestType&&(t.cancel=!0,this.deleteOpArea(t.data[0].areaID))}actionComplete(t){("beginEdit"===t.requestType||"add"===t.requestType)&&(t.dialog.header="add"===t.requestType?"New Operation Area":"Edit Operation Area",w.Browser.isDevice&&(t.dialog.height=window.innerHeight-90+"px",t.dialog.dataBind()))}createFormGroup(t){return new n.gE({areaID:new n.MJ(t.areaID,n.k0.required),name:new n.MJ(t.name,n.k0.required),yardID:new n.MJ(t.yardID,n.k0.required),active:new n.MJ(t.active),isWaitingArea:new n.MJ(t.isWaitingArea),groupName:new n.MJ(t.groupName,n.k0.required)})}addOperationArea(t){this.spinner.show(),t.active=!0,t.isWaitingArea=!!t.isWaitingArea,this.service.createOperationArea(t).pipe((0,p.W)(i=>(0,u.of)(this.showError(i)))).subscribe(i=>{1==i.status?(this.spinner.hide(),l().fire("OperationArea",i.messageContent,"success"),this.loadTableData()):(this.spinner.hide(),this.grid.dataSource=this.areaList.filter(a=>null!=a.areaID),l().fire("OperationArea",i.messageContent,"error"))})}editOperationArea(t){this.spinner.show(),t.active=!!t.active,t.isWaitingArea=!!t.isWaitingArea,this.service.updateOperationArea(t).pipe((0,p.W)(i=>(0,u.of)(this.showError(i)))).subscribe(i=>{this.loadTableData(),1==i.status?this.showSuccess(i.messageContent):(this.spinner.hide(),l().fire("OperationArea",i.messageContent,"error"))})}deleteOpArea(t){l().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(i=>{i.value?(this.spinner.show(),this.service.deleteOperationArea(t).pipe((0,p.W)(a=>(0,u.of)(this.showError(a)))).subscribe(a=>{1==a.status?(this.showSuccess(a.messageContent),this.loadTableData()):(this.spinner.hide(),l().fire("OperationArea",a.messageContent,"error"))})):i.dismiss===l().DismissReason.cancel&&l().close()})}validateControl(t){const i=this.opForm.get(t);return i.invalid&&(i.dirty||i.touched)||i.invalid&&this.submitClicked}showSuccess(t){this.spinner.hide(),l().fire("OperationArea",t,"success")}showError(t){this.spinner.hide(),l().fire("OperationArea",t.statusText,"error")}toolbarClick(t){"Excel Export"===t.item.text&&this.grid.excelExport({fileName:"OperationAreaReport.xlsx"})}exportQueryCellInfo(t){""===t.column.headerText&&(t.hyperLink={target:t.data,displayText:t.data})}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(x),e.rXU(b.ex))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-operation-area"]],viewQuery:function(i,a){if(1&i&&e.GBs(T,5),2&i){let d;e.mGM(d=e.lsd())&&(a.grid=d.first)}},standalone:!0,features:[e.aNF],decls:36,vars:11,consts:[["Grid",""],["template",""],["editSettingsTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-12","col-lg-12","text-left"],[1,"card-title"],[3,"actionBegin","actionComplete","toolbarClick","rowDataBound","dataSource","allowResizing","allowSorting","allowPaging","pageSettings","editSettings","allowExcelExport","toolbar","gridLines"],["field","areaID","headerText","Area ID","width","100",3,"isPrimaryKey"],["field","name","headerText","Name","width","150"],["field","groupName","headerText","Group Name","width","150"],["field","yardID","headerText","Yard ID","width","100"],["field","active","headerText","Active","width","100"],["field","isWaitingArea","headerText","IsWaitingArea","width","100"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-12"],["for","areaID",1,"font-weight-normal","requiredfield"],["formControlName","areaID","tabindex","1","autocomplete","off",1,"text-uppercase",3,"readonly"],["for","areaID",1,"e-error",2,"display","block"],["for","name",1,"font-weight-normal","requiredfield"],["formControlName","name","tabindex","2","autocomplete","off"],["for","name",1,"e-error",2,"display","block"],[1,"font-weight-normal","requiredfield"],["formControlName","yardID","placeholder","Select One","autocomplete","off","tabindex","3",3,"dataSource","fields"],["for","yardID",1,"e-error",2,"display","block"],["formControlName","groupName","placeholder","Select One","autocomplete","off","tabindex","4",3,"dataSource"],["for","groupName",1,"e-error",2,"display","block"],[1,"form-group","col-md-6"],["formControlName","isWaitingArea","label","IsWaitingArea","floatLabelType","Always","tabindex","5",3,"checked"],["class","form-group col-md-6",4,"ngIf"],["formControlName","active","label","Active","floatLabelType","Always","tabindex","6",3,"checked"]],template:function(i,a){if(1&i){const d=e.RV6();e.j41(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"ol",8)(5,"li",9)(6,"a",10),e.nrm(7,"i",11),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",12),e.EFF(10,"Operation Area"),e.k0s()()()(),e.j41(11,"div",6)(12,"div",13)(13,"div",14)(14,"div",6)(15,"div",15)(16,"h5",16),e.EFF(17,"Operation Area"),e.k0s()()(),e.j41(18,"ejs-grid",17,0),e.bIt("actionBegin",function(c){return e.eBV(d),e.Njj(a.actionBegin(c))})("actionComplete",function(c){return e.eBV(d),e.Njj(a.actionComplete(c))})("toolbarClick",function(c){return e.eBV(d),e.Njj(a.toolbarClick(c))})("rowDataBound",function(c){return e.eBV(d),e.Njj(a.rowDataBound(c))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",18)(22,"e-column",19)(23,"e-column",20)(24,"e-column",21),e.j41(25,"e-column",22),e.DNE(26,N,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(28,"e-column",23),e.DNE(29,L,3,2,"ng-template",null,1,e.C5r),e.k0s()(),e.DNE(31,M,35,16,"ng-template",null,2,e.C5r),e.k0s()()()()()(),e.j41(33,"ngx-spinner",24)(34,"p",25),e.EFF(35," Loading... "),e.k0s()()}2&i&&(e.R7$(18),e.Y8G("dataSource",a.data)("allowResizing",!0)("allowSorting",!0)("allowPaging",!0)("pageSettings",a.pageSettings)("editSettings",a.editSettings)("allowExcelExport",!0)("toolbar",a.toolbar)("gridLines",a.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(12),e.Y8G("fullScreen",!0))},dependencies:[C.f,j.bT,n.qT,n.BC,n.cb,n.j4,n.JD,h._ab,h.eeu,h.rFS,h.LGG,h.cvh,D.V9,F.OV,E.$W,b.et],styles:[".e-checkbox-wrapper[_ngcontent-%COMP%]   .e-label[_ngcontent-%COMP%]{font-weight:550!important}"]})}return r})()}}]);