"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[808],{4808:($,C,a)=>{a.r(C),a.d(C,{OutCheckDocComponent:()=>J});var p=a(27),i=a(9417),b=a(1413),D=a(152),k=a(5558),d=a(9437),c=a(7673),v=a(8032),u=a.n(v),e=a(3953),y=a(9812),f=a(6554),g=a(3782),j=a(177),h=a(8578),N=a(4088),x=a(7808),E=a(3924);const F=["Grid"],I=()=>({text:"yardID",value:"yardID"}),O=()=>({text:"gateID",value:"gateID"}),w=()=>({text:"cardNo",value:"cardNo"});function L(n,l){if(1&n){const o=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(o);const r=e.XpG();return e.Njj(r.onFormSubmit())}),e.nrm(1,"i",52),e.EFF(2," \xa0Save"),e.k0s()}if(2&n){const o=e.XpG();e.Y8G("disabled",!o.detailForm.valid)}}function T(n,l){1&n&&e.nrm(0,"ejs-textbox",53),2&n&&e.Y8G("readonly",!0)}function R(n,l){if(1&n){const o=e.RV6();e.j41(0,"ejs-dropdownlist",54),e.bIt("change",function(r){e.eBV(o);const s=e.XpG();return e.Njj(s.onYardChange(r.value))}),e.k0s()}if(2&n){const o=e.XpG();e.Y8G("dataSource",o.yardList)("fields",e.lJ4(2,I))}}function M(n,l){1&n&&e.nrm(0,"ejs-textbox",55),2&n&&e.Y8G("readonly",!0)}function G(n,l){if(1&n&&e.nrm(0,"ejs-dropdownlist",56),2&n){const o=e.XpG();e.Y8G("dataSource",o.gateList)("fields",e.lJ4(2,O))}}function S(n,l){1&n&&e.nrm(0,"ejs-textbox",57),2&n&&e.Y8G("readonly",!0)}function B(n,l){if(1&n){const o=e.RV6();e.j41(0,"ejs-dropdownlist",58),e.bIt("filtering",function(r){e.eBV(o);const s=e.XpG();return e.Njj(s.onCardFiltering(r))})("change",function(r){e.eBV(o);const s=e.XpG();return e.Njj(s.onCardChange(r.value))}),e.k0s()}if(2&n){const o=e.XpG();e.Y8G("dataSource",o.cardList)("fields",e.lJ4(2,w))}}function P(n,l){1&n&&e.nrm(0,"ejs-textbox",59),2&n&&e.Y8G("readonly",!0)}function Y(n,l){if(1&n&&e.nrm(0,"ejs-dropdownlist",60),2&n){const o=e.XpG();e.Y8G("dataSource",o.typeList)}}function V(n,l){1&n&&e.nrm(0,"ejs-textbox",61),2&n&&e.Y8G("readonly",!0)}function W(n,l){if(1&n&&e.nrm(0,"ejs-dropdownlist",62),2&n){const o=e.XpG();e.Y8G("dataSource",o.cargoTypeList)}}let J=(()=>{class n{constructor(o,t,r,s){this.service=o,this.spinner=t,this.route=r,this.router=s,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!1,allowAdding:!1,allowDeleting:!0,mode:"Dialog"},this.toolbar=[{text:"Checked",tooltipText:"Checked",prefixIcon:"e-icons e-check",id:"check"},"Search"],this.lines="Both",this.submitClicked=!1,this.interval=1,this.format="dd/MM/yyyy h:mm:ss a",this.cargoTypeList=["Laden","MT"],this.typeList=["FCL","LCL"],this.yardList=[],this.gateList=[],this.pcCodeList=[],this.docList=[],this.cardList=[],this.endDate=new Date,this.today=new Date,this.placeholder="Select One",this.filterPlaceholder="Search",this.searchCardTerms=new b.B,this.onFiltering=_=>{}}ngOnInit(){this.id=this.route.snapshot.queryParams.id,this.detailForm=new i.gE({outRegNo:new i.MJ(""),inRegNo:new i.MJ(""),outCheckDateTime:new i.MJ(this.today,i.k0.required),outGateID:new i.MJ("",i.k0.required),outYardID:new i.MJ("",i.k0.required),outPCCode:new i.MJ("",i.k0.required),truckVehicleRegNo:new i.MJ("",i.k0.required),driverLicenseNo:new i.MJ("",i.k0.required),driverName:new i.MJ(""),driverContactNo:new i.MJ(""),areaID:new i.MJ("",i.k0.required),transporterID:new i.MJ(""),transporterName:new i.MJ(""),truckType:new i.MJ("",i.k0.required),trailerVehicleRegNo:new i.MJ(""),outType:new i.MJ(""),outCargoType:new i.MJ(""),outCargoInfo:new i.MJ(""),cardNo:new i.MJ(""),remark:new i.MJ(""),customer:new i.MJ(""),status:new i.MJ(""),outboundWeight:new i.MJ(!1),outWeightBridgeID:new i.MJ(""),groupName:new i.MJ("")}),this.getLocationList(),this.id&&this.getOutBoundCheckById(),this.searchCardTerms.pipe((0,D.B)(300),(0,k.n)(o=>this.service.getCardICDList(o,this.yard))).subscribe(o=>{this.yard&&(this.cardList=o)})}onCardFiltering(o){o.text&&this.yard&&this.searchCardTerms.next(o.text)}getLocationList(){this.spinner.show(),this.service.getYardList("true").pipe((0,d.W)(o=>(0,c.of)(this.showError(o)))).subscribe(o=>{this.yardList=o,this.spinner.hide()})}getGateList(o){this.spinner.show(),this.service.getGateList(o).pipe((0,d.W)(t=>(0,c.of)(this.showError(t)))).subscribe(t=>{this.gateList=t,this.spinner.hide()})}getDocumentSettingList(o){this.spinner.show(),this.service.getDocumentSettingList(o).pipe((0,d.W)(t=>(0,c.of)(this.showError(t)))).subscribe(t=>{this.docList=t,this.spinner.hide()})}getCategoryList(o){this.service.getCategoryList(o).pipe((0,d.W)(t=>(0,c.of)(this.showError(t)))).subscribe(t=>{this.pcCodeList=t,this.pcCodeList.unshift({pcCode:"None"}),this.spinner.hide()})}rowDataBound(o){o.row&&o.data.checkStatus&&o.row.classList.add("bluegreen")}getOutBoundCheckById(){this.spinner.show(),this.service.getOutBoundCheckById(this.id).pipe((0,d.W)(o=>(0,c.of)(this.showError(o)))).subscribe(o=>{this.docList=o.documentList,this.detailData=o;for(let t in this.detailData)this.detailData.hasOwnProperty(t)&&null!=this.detailData[t]&&this.detailForm.controls[t]&&"documentList"!=t&&this.detailForm.controls[t].setValue(this.detailData[t])}),this.spinner.hide()}onFormSubmit(){this.spinner.show();const o=this.detailForm.value;o.outRegNo=0,o.createdUser=localStorage.getItem("currentUser"),this.docList.filter(r=>1!=r.checkStatus).length>0&&this.docList.length>0?u().fire("Out Check Document","Please check document.","warning"):(o.documentList=this.docList,this.createOutBoundCheck(o)),this.spinner.hide()}onBackSubmit(){this.router.navigate(["/tms-operation/out-check"])}createOutBoundCheck(o){this.spinner.show(),this.service.createOutBoundCheck(o).pipe((0,d.W)(t=>(0,c.of)(this.showError(t)))).subscribe(t=>{1==t.status?(this.showSuccess(t.messageContent),this.router.navigate(["/tms-operation/out-check"])):(this.spinner.hide(),u().fire("Out Check Document",t.messageContent,"error"))})}onYardChange(o){this.getGateList(o),this.yard=o}onCategoryChange(o){this.getDocumentSettingList(o)}onCardChange(o){const t=this.cardList.filter(r=>r.cardNo==o);t&&(this.detailForm.controls.inRegNo.setValue(t[0].inRegNo?t[0].inRegNo:null),this.detailForm.controls.truckVehicleRegNo.setValue(t[0].truckVehicleRegNo?t[0].truckVehicleRegNo:null),this.detailForm.controls.driverLicenseNo.setValue(t[0].driverLicenseNo?t[0].driverLicenseNo:null),this.detailForm.controls.driverContactNo.setValue(t[0].driverContactNo?t[0].driverContactNo:null),this.detailForm.controls.driverName.setValue(t[0].driverName?t[0].driverName:null),this.detailForm.controls.transporterID.setValue(t[0].transporterID?t[0].transporterID:null),this.detailForm.controls.transporterName.setValue(t[0].transporterName?t[0].transporterName:null),this.detailForm.controls.areaID.setValue(t[0].areaID?t[0].areaID:null),this.detailForm.controls.truckType.setValue(t[0].truckType?t[0].truckType:null),this.detailForm.controls.trailerVehicleRegNo.setValue(t[0].trailerVehicleRegNo?t[0].trailerVehicleRegNo:null),this.detailForm.controls.customer.setValue(t[0].customer?t[0].customer:null),this.detailForm.controls.outboundWeight.setValue(t[0].outboundWeight?t[0].outboundWeight:null),this.detailForm.controls.outWeightBridgeID.setValue(t[0].outWeightBridgeID?t[0].outWeightBridgeID:null),this.detailForm.controls.groupName.setValue(t[0].groupName?t[0].groupName:null),this.detailForm.controls.outPCCode.setValue(t[0].inPCCode?t[0].inPCCode:null),this.getDocumentSettingList(t[0].inPCCode))}showError(o){this.spinner.hide(),u().fire("Out Check Document",o.statusText,"error")}showSuccess(o){this.spinner.hide(),u().fire("Out Check Document",o,"success")}validateControl(o){const t=this.detailForm.get(o);return t.invalid&&(t.dirty||t.touched)||t.invalid&&this.submitClicked}toolbarClick(o){if("check"===o.item.id){let r=this.grid.getSelectedRecords();if(0!=r.length){if("check"===o.item.id)for(var t=0;t<r.length;t++)this.docList=this.docList.map(s=>s.docCode===r[t].docCode?{...s,docCode:r[t].docCode,docName:r[t].docName,checkStatus:!0}:s);return}u().fire("Check Document","Please select one row!","warning")}}static#e=this.\u0275fac=function(t){return new(t||n)(e.rXU(y.C),e.rXU(f.ex),e.rXU(g.nX),e.rXU(g.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-out-check-doc"]],viewQuery:function(t,r){if(1&t&&e.GBs(F,5),2&t){let s;e.mGM(s=e.lsd())&&(r.grid=s.first)}},standalone:!0,features:[e.aNF],decls:122,vars:43,consts:[["Grid",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[1,"col-md-6","col-lg-6","text-end"],["type","submit","class","btn btn-sm btn-primary mr-2 ",3,"disabled","click",4,"ngIf"],["href","/tms-operation/out-check",1,"btn","btn-sm","btn-secondary","m-1"],[1,"fa","fa-arrow-circle-left"],[1,"form-group","col-md-4"],[1,"font-weight-normal","requiredfield"],["formControlName","outYardID","tabindex","1",3,"readonly",4,"ngIf"],["formControlName","outYardID","tabindex","1","placeholder","Select One",3,"dataSource","fields","change",4,"ngIf"],[1,"e-error",2,"display","block"],["formControlName","outGateID","tabindex","2",3,"readonly",4,"ngIf"],["formControlName","outGateID","tabindex","2","placeholder","Select One",3,"dataSource","fields",4,"ngIf"],["formControlName","cardNo","tabindex","3",3,"readonly",4,"ngIf"],["formControlName","cardNo","tabindex","3","placeholder","Enter some keys","allowFiltering","true",3,"dataSource","fields","filtering","change",4,"ngIf"],["formControlName","outPCCode","tabindex","4",3,"readonly"],["formControlName","outCheckDateTime","autocomplete","off","tabindex","5",3,"format","step","readonly"],[1,"font-weight-normal"],["formControlName","areaID","tabindex","6",3,"readonly"],["formControlName","truckType","tabindex","7",3,"readonly"],["formControlName","truckVehicleRegNo","tabindex","8",3,"readonly"],["formControlName","trailerVehicleRegNo","tabindex","9",3,"readonly"],[1,"row","my-2"],["formControlName","driverLicenseNo","tabindex","10",3,"readonly"],["formControlName","outType","tabindex","11",3,"readonly",4,"ngIf"],["formControlName","outType","tabindex","11","placeholder","Select One",3,"dataSource",4,"ngIf"],["formControlName","outCargoType","tabindex","12",3,"readonly",4,"ngIf"],["formControlName","outCargoType","tabindex","12","placeholder","Select One",3,"dataSource",4,"ngIf"],["formControlName","outCargoInfo","tabindex","13",3,"multiline","readonly"],["formControlName","customer","tabindex","14",3,"multiline","readonly"],["formControlName","remark","tabindex","15",3,"multiline","readonly"],[3,"toolbarClick","rowDataBound","dataSource","allowSorting","allowPaging","pageSettings","editSettings","toolbar","gridLines"],["type","checkbox","width","40"],["field","docCode","headerText","Doc No","width","100"],["field","docName","headerText","Name","width","110"],["field","checkStatus","headerText","Check Status","width","120"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],["type","submit",1,"btn","btn-sm","btn-primary","mr-2",3,"click","disabled"],[1,"fa","fa-save"],["formControlName","outYardID","tabindex","1",3,"readonly"],["formControlName","outYardID","tabindex","1","placeholder","Select One",3,"change","dataSource","fields"],["formControlName","outGateID","tabindex","2",3,"readonly"],["formControlName","outGateID","tabindex","2","placeholder","Select One",3,"dataSource","fields"],["formControlName","cardNo","tabindex","3",3,"readonly"],["formControlName","cardNo","tabindex","3","placeholder","Enter some keys","allowFiltering","true",3,"filtering","change","dataSource","fields"],["formControlName","outType","tabindex","11",3,"readonly"],["formControlName","outType","tabindex","11","placeholder","Select One",3,"dataSource"],["formControlName","outCargoType","tabindex","12",3,"readonly"],["formControlName","outCargoType","tabindex","12","placeholder","Select One",3,"dataSource"]],template:function(t,r){if(1&t){const s=e.RV6();e.j41(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"ol",5)(5,"li",6)(6,"a",7),e.nrm(7,"i",8),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",6),e.EFF(10,"Out Check"),e.k0s(),e.j41(11,"li",9),e.EFF(12,"Out Check(ICD/Other)"),e.k0s()()()(),e.j41(13,"div",3)(14,"div",10)(15,"div",11)(16,"form",12)(17,"div",3)(18,"div",13)(19,"h5",14),e.EFF(20,"Out Check(ICD/Other)"),e.k0s()(),e.j41(21,"div",15),e.DNE(22,L,3,1,"button",16),e.j41(23,"a",17),e.nrm(24,"i",18),e.EFF(25," \xa0 Back "),e.k0s()()(),e.nrm(26,"br"),e.j41(27,"div",3)(28,"div",19)(29,"label",20),e.EFF(30,"Yard"),e.k0s(),e.DNE(31,T,1,1,"ejs-textbox",21)(32,R,1,3,"ejs-dropdownlist",22),e.j41(33,"div")(34,"label",23),e.EFF(35,"*Yard is required"),e.k0s()()(),e.j41(36,"div",19)(37,"label",20),e.EFF(38,"Gate"),e.k0s(),e.DNE(39,M,1,1,"ejs-textbox",24)(40,G,1,3,"ejs-dropdownlist",25),e.j41(41,"div")(42,"label",23),e.EFF(43,"*Gate is required"),e.k0s()()(),e.j41(44,"div",19)(45,"label",20),e.EFF(46,"Card No"),e.k0s(),e.DNE(47,S,1,1,"ejs-textbox",26)(48,B,1,3,"ejs-dropdownlist",27),e.j41(49,"div")(50,"label",23),e.EFF(51,"*CardNo is required"),e.k0s()()()(),e.j41(52,"div",3)(53,"div",19)(54,"label",20),e.EFF(55,"Category"),e.k0s(),e.nrm(56,"ejs-textbox",28),e.k0s(),e.j41(57,"div",19)(58,"label",20),e.EFF(59,"Check Date Time"),e.k0s(),e.nrm(60,"ejs-timepicker",29),e.j41(61,"div")(62,"label",23),e.EFF(63,"*Check Date Time is required"),e.k0s()()(),e.j41(64,"div",19)(65,"label",30),e.EFF(66,"Operation Area"),e.k0s(),e.nrm(67,"ejs-textbox",31),e.k0s()(),e.j41(68,"div",3)(69,"div",19)(70,"label",30),e.EFF(71,"Truck Type"),e.k0s(),e.nrm(72,"ejs-textbox",32),e.k0s(),e.j41(73,"div",19)(74,"label",30),e.EFF(75,"Truck No"),e.k0s(),e.nrm(76,"ejs-textbox",33),e.k0s(),e.j41(77,"div",19)(78,"label",30),e.EFF(79,"Trailer No"),e.k0s(),e.nrm(80,"ejs-textbox",34),e.k0s()(),e.j41(81,"div",35)(82,"div",19)(83,"label",30),e.EFF(84,"Driver Name"),e.k0s(),e.nrm(85,"ejs-textbox",36),e.k0s(),e.j41(86,"div",19)(87,"label",30),e.EFF(88,"Type"),e.k0s(),e.DNE(89,P,1,1,"ejs-textbox",37)(90,Y,1,1,"ejs-dropdownlist",38),e.k0s(),e.j41(91,"div",19)(92,"label",30),e.EFF(93,"Cargo Type"),e.k0s(),e.DNE(94,V,1,1,"ejs-textbox",39)(95,W,1,1,"ejs-dropdownlist",40),e.k0s()(),e.j41(96,"div",3)(97,"div",19)(98,"label",30),e.EFF(99,"CargoInfo"),e.k0s(),e.nrm(100,"ejs-textbox",41),e.k0s(),e.j41(101,"div",19)(102,"label",30),e.EFF(103,"Customer"),e.k0s(),e.nrm(104,"ejs-textbox",42),e.k0s(),e.j41(105,"div",19)(106,"label",30),e.EFF(107,"Remark"),e.k0s(),e.nrm(108,"ejs-textbox",43),e.k0s()()(),e.nrm(109,"br"),e.j41(110,"h6"),e.EFF(111,"Documents"),e.k0s(),e.j41(112,"ejs-grid",44,0),e.bIt("toolbarClick",function(m){return e.eBV(s),e.Njj(r.toolbarClick(m))})("rowDataBound",function(m){return e.eBV(s),e.Njj(r.rowDataBound(m))}),e.j41(114,"e-columns"),e.nrm(115,"e-column",45)(116,"e-column",46)(117,"e-column",47)(118,"e-column",48),e.k0s()()()()()()(),e.j41(119,"ngx-spinner",49)(120,"p",50),e.EFF(121," Loading... "),e.k0s()()}2&t&&(e.R7$(16),e.Y8G("formGroup",r.detailForm),e.R7$(6),e.Y8G("ngIf",!r.id),e.R7$(9),e.Y8G("ngIf",r.id),e.R7$(),e.Y8G("ngIf",!r.id),e.R7$(),e.xc7("visibility",r.validateControl("outYardID")?"visible":"hidden"),e.R7$(6),e.Y8G("ngIf",r.id),e.R7$(),e.Y8G("ngIf",!r.id),e.R7$(),e.xc7("visibility",r.validateControl("outGateID")?"visible":"hidden"),e.R7$(6),e.Y8G("ngIf",r.id),e.R7$(),e.Y8G("ngIf",!r.id),e.R7$(),e.xc7("visibility",r.validateControl("cardNo")?"visible":"hidden"),e.R7$(7),e.Y8G("readonly",!0),e.R7$(4),e.Y8G("format",r.format)("step",r.interval)("readonly",r.id),e.R7$(),e.xc7("visibility",r.validateControl("outCheckDateTime")?"visible":"hidden"),e.R7$(6),e.Y8G("readonly",!0),e.R7$(5),e.Y8G("readonly",!0),e.R7$(4),e.Y8G("readonly",!0),e.R7$(4),e.Y8G("readonly",!0),e.R7$(5),e.Y8G("readonly",!0),e.R7$(4),e.Y8G("ngIf",r.id),e.R7$(),e.Y8G("ngIf",!r.id),e.R7$(4),e.Y8G("ngIf",r.id),e.R7$(),e.Y8G("ngIf",!r.id),e.R7$(5),e.Y8G("multiline",!0)("readonly",r.id),e.R7$(4),e.Y8G("multiline",!0)("readonly",r.id),e.R7$(4),e.Y8G("multiline",!0)("readonly",r.id),e.R7$(4),e.Y8G("dataSource",r.docList)("allowSorting",!0)("allowPaging",!0)("pageSettings",r.pageSettings)("editSettings",r.editSettings)("toolbar",r.toolbar)("gridLines",r.lines),e.R7$(7),e.Y8G("fullScreen",!0))},dependencies:[p.Q,j.bT,i.qT,i.BC,i.cb,i.j4,i.JD,h._ab,h.eeu,h.rFS,h.LGG,h.cvh,N.V9,x.OV,E.fl,f.et]})}return n})()}}]);