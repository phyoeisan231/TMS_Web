"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[22],{6022:(B,p,n)=>{n.r(p),n.d(p,{TransporterDetailComponent:()=>A});var o=n(9417),c=n(9437),m=n(7673),h=n(8032),l=n.n(h),v=n(7037),t=n(3953),T=n(345),f=n(1626),d=n(2525);new f.Lr({"Content-Type":"application/json"});let F=(()=>{class s{constructor(r,a){this.injector=r,this.http=a}createTransporter(r){return this.http.post(d.c.url+"Master/SaveTransporter/",r,{reportProgress:!0})}getTransporterById(r){return this.http.get(d.c.url+"Master/GetTransporterId/?id="+r)}updateTransporter(r){return this.http.put(d.c.url+"Master/UpdateTransporter/",r,{reportProgress:!0})}static#t=this.\u0275fac=function(a){return new(a||s)(t.KVO(t.zZn),t.KVO(f.Qq))};static#r=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var b=n(6554),u=n(3782),g=n(177),I=n(4088),k=n(7808),D=n(5029);function y(s,i){if(1&s){const r=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(r);const e=t.XpG();return t.Njj(e.saveTransporter())}),t.nrm(1,"i",35),t.EFF(2," \xa0Save"),t.k0s()}if(2&s){const r=t.XpG();t.Y8G("disabled",!r.transForm.valid)}}function N(s,i){if(1&s){const r=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(r);const e=t.XpG();return t.Njj(e.saveTransporter())}),t.nrm(1,"i",35),t.EFF(2," \xa0Update"),t.k0s()}if(2&s){const r=t.XpG();t.Y8G("disabled",!r.transForm.valid)}}function j(s,i){1&s&&(t.j41(0,"label",21),t.EFF(1,"Transporter ID"),t.k0s())}function E(s,i){if(1&s&&(t.j41(0,"div",20),t.DNE(1,j,2,0,"label",36),t.nrm(2,"ejs-textbox",37),t.k0s()),2&s){const r=t.XpG();t.R7$(),t.Y8G("ngIf",!r.isAdd)}}function x(s,i){1&s&&(t.j41(0,"div")(1,"small",38),t.EFF(2,"This field is required."),t.k0s()())}function C(s,i){1&s&&(t.j41(0,"div")(1,"small",38),t.EFF(2,"This field is required."),t.k0s()())}function w(s,i){1&s&&(t.j41(0,"div")(1,"small",38),t.EFF(2,"This field is required."),t.k0s()())}function G(s,i){1&s&&(t.j41(0,"div")(1,"small",38),t.EFF(2,"This field is required."),t.k0s()())}let A=(()=>{class s{constructor(r,a,e,V,M){this._sanitizer=r,this.service=a,this.spinner=e,this.route=V,this.router=M,this.isAdd=!0,this.transTypesList=["Company","Gate"],this.formatfilter="dd-MMM-yyyy",this.today=new Date}ngOnInit(){this.breadCrumbItems=[{label:"Transporter Detail",routerLink:"master/transporter-detail",active:!1},{label:"Add New Transporter",active:!0}],this.id=this.route.snapshot.queryParams.id,this.transForm=new o.gE({transporterID:new o.MJ(this.id),transporterName:new o.MJ("",o.k0.required),address:new o.MJ(""),contactNo:new o.MJ("",o.k0.required),email:new o.MJ("",[o.k0.email]),contactPerson:new o.MJ("",o.k0.required),typeID:new o.MJ("",o.k0.required),remarks:new o.MJ(""),active:new o.MJ(!1),isBlack:new o.MJ(""),sapID:new o.MJ("")}),null!=this.id&&null!=this.id&&this.getTransporterById()}navigateToTransporter(){this.router.navigate(["master/transporter"])}getTransporterById(){this.spinner.show(),this.service.getTransporterById(this.id).pipe((0,c.W)(r=>(0,m.of)(this.showError(r)))).subscribe(r=>{this.transForm.controls.transporterID.setValue(r.transporterID),this.transForm.controls.transporterName.setValue(r.transporterName),this.transForm.controls.address.setValue(r.address),this.transForm.controls.contactNo.setValue(r.contactNo),this.transForm.controls.email.setValue(r.email),this.transForm.controls.contactPerson.setValue(r.contactPerson),this.transForm.controls.typeID.setValue(r.typeID),this.transForm.controls.remarks.setValue(r.remarks),this.transForm.controls.active.setValue(r.active),this.transForm.controls.isBlack.setValue(r.isBlack),this.transForm.controls.sapID.setValue(r.sapID),this.isAdd=!1,this.breadCrumbItems=[{label:"Transporter",rounterLink:"master/transporter-detail",active:!1},{label:"Edit Transporter",active:!0}],this.spinner.hide()})}saveTransporter(){const r=this.transForm.value;this.isAdd?(r.createdUser=localStorage.getItem("currentUser"),r.isBlack=r.isBlack,this.addNewTransporter(r)):(r.updatedUser=localStorage.getItem("currentUser"),this.editTransporter(r))}addNewTransporter(r){this.spinner.show(),this.service.createTransporter({transporterID:"1",transporterName:r.transporterName,address:r.address,contactNo:r.contactNo,email:r.email,contactPerson:r.contactPerson,typeID:r.typeID,remarks:r.remarks,active:r.active,isBlack:r.isBlack,sapID:r.sapID}).pipe((0,c.W)(e=>(this.spinner.hide(),this.showError(e),(0,m.of)({status:!1,messageContent:"An error occurred while adding the transporter."})))).subscribe(e=>{this.spinner.hide(),e.status?(this.showSuccess("Transporter Added Successfully!"),this.router.navigate(["master/transporter"])):l().fire("Transporter",e.messageContent,"error")})}editTransporter(r){this.spinner.show(),this.service.updateTransporter(this.transForm.value).pipe((0,c.W)(e=>(0,m.of)(this.showError(e)))).subscribe(e=>{this.spinner.hide(),1==e.status?(this.showSuccess("Transporter Updated Successfully!"),this.router.navigate(["master/transporter"])):l().fire("Transporter",e.messageContent,"error")})}showSuccess(r){l().fire("Transporter",r,"success")}showError(r){l().fire("Transporter",r.statusText,"error")}static#t=this.\u0275fac=function(a){return new(a||s)(t.rXU(T.up),t.rXU(F),t.rXU(b.ex),t.rXU(u.nX),t.rXU(u.Ix))};static#r=this.\u0275cmp=t.VBU({type:s,selectors:[["app-transporter-detail"]],standalone:!0,features:[t.aNF],decls:71,vars:9,consts:[[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[1,"col-md-6","col-lg-6","text-end"],["type","submit","class","btn btn-sm btn-primary mr-2 ",3,"disabled","click",4,"ngIf"],["routerLink","master/transporter","href","master/transporter",1,"btn","btn-sm","btn-secondary","m-1"],[1,"fa","fa-arrow-circle-left"],[1,"row","my-0"],["class","form-group col-md-4",4,"ngIf"],[1,"form-group","col-md-4"],[1,"font-weight-normal","requiredfield"],["formControlName","transporterName","placeholder","Enter Transporter Name","autocomplete","off","tabindex","1","maxlength","100"],[4,"ngIf"],[1,"font-weight-normal"],["formControlName","address","placeholder","Enter Address","autocomplete","off","tabindex","2","maxlength","100"],[1,"row","mt-2"],["formControlName","email","autocomplete","off","placeholder","Enter Email ","tabindex","3","maxlength","100"],["formControlName","contactPerson","autocomplete","off","placeholder","Enter Contact Person","tabindex","4","maxlength","100"],["formControlName","contactNo","placeholder","Enter Contact No.","autocomplete","off","tabindex","5","maxlength","100"],["formControlName","typeID","autocomplete","off","placeholder","Choose Transporter Type","tabindex","6","maxlength","100",3,"dataSource"],["formControlName","sapID","placeholder","Enter SAPID","autocomplete","off","tabindex","7","maxlength","100"],["formControlName","remarks","autocomplete","off","placeholder","Remarks ","tabindex","8","maxlength","100",1,"form-control","form-control-sm"],["formControlName","active","label","IsActive","tabindex","9"],["type","submit",1,"btn","btn-sm","btn-primary","mr-2",3,"click","disabled"],[1,"fa","fa-save"],["class","font-weight-normal requiredfield",4,"ngIf"],["formControlName","transporterID","tabindex","0","readonly","true"],[1,"text-danger"]],template:function(a,e){1&a&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ol",4)(5,"li",5)(6,"a",6),t.nrm(7,"i",7),t.EFF(8,"\xa0Dashboard"),t.k0s()(),t.j41(9,"li",5),t.EFF(10,"Transporter"),t.k0s(),t.j41(11,"li",8),t.EFF(12,"Transporter Info"),t.k0s()()()()(),t.j41(13,"div",2)(14,"div",9)(15,"div",10)(16,"form",11)(17,"div",2)(18,"div",12)(19,"h5",13),t.EFF(20,"Transporter Info"),t.k0s()(),t.j41(21,"div",14),t.DNE(22,y,3,1,"button",15)(23,N,3,1,"button",15),t.j41(24,"a",16),t.nrm(25,"i",17),t.EFF(26," \xa0 Back "),t.k0s()()(),t.nrm(27,"br"),t.j41(28,"div",18),t.DNE(29,E,3,1,"div",19),t.j41(30,"div",20)(31,"label",21),t.EFF(32,"Transporter Name"),t.k0s(),t.nrm(33,"ejs-textbox",22),t.DNE(34,x,3,0,"div",23),t.k0s(),t.j41(35,"div",20)(36,"label",24),t.EFF(37,"Address"),t.k0s(),t.nrm(38,"ejs-textbox",25),t.k0s()(),t.j41(39,"div",26)(40,"div",20)(41,"label",24),t.EFF(42,"Email"),t.k0s(),t.nrm(43,"ejs-textbox",27),t.k0s(),t.j41(44,"div",20)(45,"label",21),t.EFF(46,"Contact Person"),t.k0s(),t.nrm(47,"ejs-textbox",28),t.DNE(48,C,3,0,"div",23),t.k0s(),t.j41(49,"div",20)(50,"label",21),t.EFF(51,"Contact No."),t.k0s(),t.nrm(52,"ejs-textbox",29),t.DNE(53,w,3,0,"div",23),t.k0s()(),t.j41(54,"div",26)(55,"div",20)(56,"label",21),t.EFF(57,"Transporter Type"),t.k0s(),t.nrm(58,"ejs-dropdownlist",30),t.DNE(59,G,3,0,"div",23),t.k0s(),t.j41(60,"div",20)(61,"label",24),t.EFF(62,"SAPID"),t.k0s(),t.nrm(63,"ejs-textbox",31),t.k0s(),t.j41(64,"div",20)(65,"label",24),t.EFF(66,"Remarks"),t.k0s(),t.nrm(67,"textarea",32),t.k0s()(),t.j41(68,"div",26)(69,"div",20),t.nrm(70,"ejs-checkbox",33),t.k0s()()()()()()()),2&a&&(t.R7$(16),t.Y8G("formGroup",e.transForm),t.R7$(6),t.Y8G("ngIf",e.isAdd),t.R7$(),t.Y8G("ngIf",!e.isAdd),t.R7$(6),t.Y8G("ngIf",!e.isAdd),t.R7$(5),t.Y8G("ngIf",e.transForm.controls.transporterName.invalid&&(e.transForm.controls.transporterName.touched||e.transForm.controls.transporterName.dirty)),t.R7$(14),t.Y8G("ngIf",e.transForm.controls.contactPerson.invalid&&(e.transForm.controls.contactPerson.touched||e.transForm.controls.contactPerson.dirty)),t.R7$(5),t.Y8G("ngIf",e.transForm.controls.contactNo.invalid&&(e.transForm.controls.contactNo.touched||e.transForm.controls.contactNo.dirty)),t.R7$(5),t.Y8G("dataSource",e.transTypesList),t.R7$(),t.Y8G("ngIf",e.transForm.controls.typeID.invalid&&(e.transForm.controls.typeID.touched||e.transForm.controls.typeID.dirty)))},dependencies:[v.f,g.bT,o.qT,o.me,o.BC,o.cb,o.tU,o.j4,o.JD,I.V9,k.OV,D.$W,o.X1]})}return s})()}}]);