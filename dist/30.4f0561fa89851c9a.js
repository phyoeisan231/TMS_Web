"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[30],{30:(V,u,s)=>{s.r(u),s.d(u,{TrailerDetailComponent:()=>w});var o=s(9417),m=s(9437),h=s(7673),f=s(8032),c=s.n(f),g=s(7037),e=s(3953),T=s(345),d=s(1626),n=s(2525);new d.Lr({"Content-Type":"application/json"});let b=(()=>{class a{constructor(r,i){this.Injector=r,this.http=i}createTrailer(r){return this.http.post(n.c.url+"Master/SaveTrailer/",r,{reportProgress:!0})}getTransporterList(r,i){const t=(new d.Nl).set("active",r).set("isBlack",i);return this.http.get(`${n.c.url}Master/GetTransporterList`,{params:t})}getDriverList(r,i){const t=(new d.Nl).set("active",r).set("isBlack",i);return this.http.get(n.c.url+"Master/GetDriverList",{params:t})}getTrailerId(r){return this.http.get(n.c.url+"Master/GetTrailerId/?id="+r)}updateTrailer(r){return this.http.put(n.c.url+"Master/UpdateTrailer",r,{reportProgress:!0})}static#e=this.\u0275fac=function(i){return new(i||a)(e.KVO(e.zZn),e.KVO(d.Qq))};static#r=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var k=s(6554),p=s(3782),F=s(177),N=s(4088),v=s(7808),C=s(5029);const R=()=>({text:"transporterName",value:"transporterID"}),D=()=>({text:"driverName",value:"licenseNo"});function y(a,l){if(1&a){const r=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.saveTrailer())}),e.nrm(1,"i",35),e.EFF(2," \xa0Save"),e.k0s()}if(2&a){const r=e.XpG();e.Y8G("disabled",!r.trailerForm.valid)}}function I(a,l){if(1&a){const r=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.saveTrailer())}),e.nrm(1,"i",35),e.EFF(2," \xa0Update"),e.k0s()}if(2&a){const r=e.XpG();e.Y8G("disabled",!r.trailerForm.valid)}}function j(a,l){1&a&&(e.j41(0,"label",28),e.EFF(1,"Vehicle Reg No."),e.k0s())}function x(a,l){1&a&&(e.j41(0,"label",28),e.EFF(1,"Vehicle Reg No."),e.k0s())}function L(a,l){1&a&&(e.j41(0,"div")(1,"small",36),e.EFF(2,"This field is required."),e.k0s()())}function E(a,l){1&a&&(e.j41(0,"div")(1,"small",36),e.EFF(2,"This field is required."),e.k0s()())}let w=(()=>{class a{constructor(r,i,t,B,S){this._sanitizer=r,this.service=i,this.spinner=t,this.route=B,this.router=S,this.isAdd=!0,this.containerSizeList=[20,40,45],this.containerTypeList=["DV","FR","GP","HC","HQ","HG","OS","OT","PF","RF","RH","TK","IC","FL","BC","HT","VC","PL"],this.transporterNames=[],this.formatfilter="dd-MMM-yyyy",this.today=new Date,this.submitClicked=!1}ngOnInit(){this.breadCrumbItems=[{label:"Trailer List",routerLink:"/trailer-detail",active:!1},{label:"Add New Trailer",active:!0}],this.id=this.route.snapshot.queryParams.id,this.trailerForm=new o.gE({vehicleRegNo:new o.MJ({value:this.id,disabled:!!this.id},o.k0.required),vehicleBackRegNo:new o.MJ(""),containerType:new o.MJ(""),containerSize:new o.MJ(""),transporterID:new o.MJ("",o.k0.required),trailerWeight:new o.MJ(""),driverLicenseNo:new o.MJ(""),remarks:new o.MJ(""),active:new o.MJ(!1),isBlack:new o.MJ("")}),this.id&&(this.getTrailerById(),this.isAdd=!0),this.service.getDriverList("true","false").subscribe({next:r=>{console.log("Driver License and Names Loaded:",r),this.driverLicenseNoList=r},error:r=>{console.error("Error Loading Transporter Names:",r)}}),this.service.getTransporterList("true","false").subscribe({next:r=>{console.log("Transporter Names Loaded:",r),this.transporterNames=r},error:r=>{console.log("Error Loading Transporter Names",r)}})}getTrailerById(){this.spinner.show(),this.service.getTrailerId(this.id).pipe((0,m.W)(r=>(0,h.of)(this.showError(r)))).subscribe(r=>{this.trailerForm.controls.vehicleRegNo.setValue(r.vehicleRegNo),this.trailerForm.controls.vehicleBackRegNo.setValue(r.vehicleBackRegNo),this.trailerForm.controls.containerType.setValue(r.containerType),this.trailerForm.controls.containerSize.setValue(r.containerSize),this.trailerForm.controls.transporterID.setValue(r.transporterID),this.trailerForm.controls.trailerWeight.setValue(r.trailerWeight),this.trailerForm.controls.driverLicenseNo.setValue(r.driverLicenseNo),this.trailerForm.controls.remarks.setValue(r.remarks),this.trailerForm.controls.active.setValue(r.active),this.trailerForm.controls.isBlack.setValue(r.isBlack),this.isAdd=!1,this.breadCrumbItems=[{label:"Trailer",rounterLink:"/trailer-detail",active:!1},{label:"Edit Trailer",active:!0}],this.spinner.hide()})}saveTrailer(){const r=this.trailerForm.value;this.isAdd?(r.createdUser=localStorage.getItem("currentUser"),r.vehicleRegNo=r.vehicleRegNo.toUpperCase(),r.vehicleBackRegNo=r.vehicleBackRegNo.toUpperCase(),r.isBlack=r.isBlack,this.addNewTrailer(r)):(r.updatedUser=localStorage.getItem("currentUser"),this.editTrailer(r))}navigateToTrailer(){this.router.navigate(["master/trailer"])}addNewTrailer(r){this.spinner.show(),this.service.createTrailer({VehicleRegNo:r.vehicleRegNo,VehicleBackRegNo:r.vehicleBackRegNo,ContainerType:r.containerType,ContainerSize:r.containerSize??"",TransporterID:r.transporterID,TrailerWeight:r.trailerWeight??"",DriverLicenseNo:r.driverLicenseNo,Remarks:r.remarks,Active:r.active,IsBlack:r.isBlack}).pipe((0,m.W)(t=>(0,h.of)(this.showError(t)))).subscribe(t=>{this.spinner.hide(),t.status?(this.showSuccess("Trailer Added Successfully!"),this.router.navigate(["master/trailer"])):c().fire("Trailer",t.messageContent,"error")})}editTrailer(r){this.spinner.show(),this.service.updateTrailer({VehicleRegNo:this.id,VehicleBackRegNo:r.vehicleBackRegNo??"",ContainerType:r.containerType,ContainerSize:r.containerSize??"",TransporterID:r.transporterID,TrailerWeight:r.trailerWeight??"",DriverLicenseNo:r.driverLicenseNo,Remarks:r.remarks??"",Active:r.active,IsBlack:r.isBlack}).pipe((0,m.W)(t=>(0,h.of)(this.showError(t)))).subscribe(t=>{this.spinner.hide(),t.status?(this.showSuccess("Trailer Updated Successfully!"),this.router.navigate(["master/trailer"])):c().fire("Trailer",t.messageContent,"error")})}showSuccess(r){c().fire("Trailer",r,"success")}showError(r){c().fire("Trailer",r.statusText,"error")}validateControl(r){const i=this.trailerForm.get(r);return i.invalid&&(i.dirty||i.touched)||i.invalid&&this.submitClicked}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(T.up),e.rXU(b),e.rXU(k.ex),e.rXU(p.nX),e.rXU(p.Ix))};static#r=this.\u0275cmp=e.VBU({type:a,selectors:[["app-trailer-detail"]],standalone:!0,features:[e.aNF],decls:68,vars:19,consts:[[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[1,"col-md-6","col-lg-6","text-end"],["type","submit","class","btn btn-sm btn-primary mr-2 ",3,"disabled","click",4,"ngIf"],["routerLink","master/trailer","href","master/trailer",1,"btn","btn-sm","btn-secondary","m-1"],[1,"fa","fa-arrow-circle-left"],[1,"row","my-0"],[1,"form-group","col-md-4"],["class","font-weight-normal requiredfield",4,"ngIf"],["formControlName","vehicleRegNo","tabindex","0","maxlength","50",1,"text-uppercase"],[4,"ngIf"],[1,"font-weight-normal"],["formControlName","vehicleBackRegNo","autocomplete","off","tabindex","1","maxlength","100",1,"text-uppercase"],["formControlName","containerType","placeholder","Choose Container Type","autocomplete","off","tabindex","2","maxlength","100",3,"dataSource"],[1,"row","mt-2"],["formControlName","containerSize","autocomplete","off","placeholder","Choose Container Size","tabindex","3","maxlength","100",3,"dataSource"],[1,"font-weight-normal","requiredfield"],["formControlName","transporterID","autocomplete","off","placeholder","Choose Transpoter","tabindex","4","maxlength","100",3,"dataSource","fields"],["formControlName","trailerWeight","placeholder","Trailer Weight","autocomplete","off","tabindex","5","maxlength","100",3,"min","max","decimals"],["formControlName","driverLicenseNo","placeholder","Choose Driver","autocomplete","off","tabindex","7","maxlength","100",3,"dataSource","fields"],["formControlName","remarks","autocomplete","off","placeholder","Remarks ","tabindex","9",1,"form-control","form-control-sm"],["formControlName","active","tabindex","8","label","IsActive",3,"checked"],["type","submit",1,"btn","btn-sm","btn-primary","mr-2",3,"click","disabled"],[1,"fa","fa-save"],[1,"text-danger"]],template:function(i,t){1&i&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ol",4)(5,"li",5)(6,"a",6),e.nrm(7,"i",7),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",5),e.EFF(10,"Trailer"),e.k0s(),e.j41(11,"li",8),e.EFF(12,"Trailer Info"),e.k0s()()()(),e.j41(13,"div",2)(14,"div",9)(15,"div",10)(16,"form",11)(17,"div",2)(18,"div",12)(19,"h5",13),e.EFF(20,"Trailer Info"),e.k0s()(),e.j41(21,"div",14),e.DNE(22,y,3,1,"button",15)(23,I,3,1,"button",15),e.j41(24,"a",16),e.nrm(25,"i",17),e.EFF(26," \xa0 Back "),e.k0s()()(),e.nrm(27,"br"),e.j41(28,"div",18)(29,"div",19),e.DNE(30,j,2,0,"label",20)(31,x,2,0,"label",20),e.nrm(32,"ejs-textbox",21),e.DNE(33,L,3,0,"div",22),e.k0s(),e.j41(34,"div",19)(35,"label",23),e.EFF(36,"Vehicle Back RegNo."),e.k0s(),e.nrm(37,"ejs-textbox",24),e.k0s(),e.j41(38,"div",19)(39,"label",23),e.EFF(40,"Container Type"),e.k0s(),e.nrm(41,"ejs-dropdownlist",25),e.k0s()(),e.j41(42,"div",26)(43,"div",19)(44,"label",23),e.EFF(45,"Container Size"),e.k0s(),e.nrm(46,"ejs-dropdownlist",27),e.k0s(),e.j41(47,"div",19)(48,"label",28),e.EFF(49,"Transporter"),e.k0s(),e.nrm(50,"ejs-dropdownlist",29),e.DNE(51,E,3,0,"div",22),e.k0s(),e.j41(52,"div",19)(53,"label",23),e.EFF(54,"Trailer Weight"),e.k0s(),e.nrm(55,"ejs-numerictextbox",30),e.k0s()(),e.j41(56,"div",26)(57,"div",19)(58,"label",23),e.EFF(59,"Driver"),e.k0s(),e.nrm(60,"ejs-dropdownlist",31),e.k0s(),e.j41(61,"div",19)(62,"label"),e.EFF(63,"Remarks"),e.k0s(),e.nrm(64,"textarea",32),e.k0s(),e.j41(65,"div",19),e.nrm(66,"br")(67,"ejs-checkbox",33),e.k0s()()()()()()()()),2&i&&(e.R7$(16),e.Y8G("formGroup",t.trailerForm),e.R7$(6),e.Y8G("ngIf",t.isAdd),e.R7$(),e.Y8G("ngIf",!t.isAdd),e.R7$(7),e.Y8G("ngIf",t.isAdd),e.R7$(),e.Y8G("ngIf",!t.isAdd),e.R7$(2),e.Y8G("ngIf",t.trailerForm.controls.vehicleRegNo.invalid&&(t.trailerForm.controls.vehicleRegNo.touched||t.trailerForm.controls.vehicleRegNo.dirty)),e.R7$(8),e.Y8G("dataSource",t.containerTypeList),e.R7$(5),e.Y8G("dataSource",t.containerSizeList),e.R7$(4),e.Y8G("dataSource",t.transporterNames)("fields",e.lJ4(17,R)),e.R7$(),e.Y8G("ngIf",t.trailerForm.controls.transporterID.invalid&&(t.trailerForm.controls.transporterID.touched||t.trailerForm.controls.transporterID.dirty)),e.R7$(4),e.Y8G("min",0)("max",1e5)("decimals",2),e.R7$(5),e.Y8G("dataSource",t.driverLicenseNoList)("fields",e.lJ4(18,D)),e.R7$(7),e.Y8G("checked",!0))},dependencies:[g.f,F.bT,o.qT,o.me,o.BC,o.cb,o.tU,o.j4,o.JD,N.V9,v.Jh,v.OV,C.$W]})}return a})()}}]);