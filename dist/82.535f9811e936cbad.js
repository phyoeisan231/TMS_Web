"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[82],{2701:(B,v,o)=>{o.r(v),o.d(v,{DriverDetailComponent:()=>G});var s=o(9417),c=o(9437),d=o(7673),p=o(8032),l=o.n(p),D=o(7037),F=o(7586),f=o.n(F),e=o(3953),b=o(345),h=o(1626),m=o(2525);new h.Lr({"Content-Type":"application/json"});let E=(()=>{class i{constructor(r,n){this.Injector=r,this.http=n}createDriver(r){return this.http.post(m.c.url+"Master/SaveDriver/",r,{reportProgress:!0})}getDriverId(r){const n=encodeURIComponent(r);return this.http.get(`${m.c.url}Master/GetDriverId/?id=${n}`)}updateDriver(r){return this.http.put(m.c.url+"Master/UpdateDriver/",r,{reportProgress:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(e.KVO(e.zZn),e.KVO(h.Qq))};static#r=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var g=o(6554),u=o(3782),C=o(177),k=o(4088),N=o(3924),x=o(7808),j=o(5029);function I(i,a){if(1&i){const r=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.saveDriverList())}),e.nrm(1,"i",36),e.EFF(2," \xa0Save"),e.k0s()}if(2&i){const r=e.XpG();e.Y8G("disabled",!r.driverForm.valid)}}function y(i,a){if(1&i){const r=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.saveDriverList())}),e.nrm(1,"i",36),e.EFF(2," \xa0Update"),e.k0s()}if(2&i){const r=e.XpG();e.Y8G("disabled",!r.driverForm.valid)}}function L(i,a){1&i&&(e.j41(0,"label",25),e.EFF(1,"License No."),e.k0s())}function w(i,a){1&i&&(e.j41(0,"label",25),e.EFF(1,"License No."),e.k0s())}function A(i,a){1&i&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function R(i,a){1&i&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function M(i,a){1&i&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}function Y(i,a){1&i&&(e.j41(0,"div")(1,"small",37),e.EFF(2,"This field is required."),e.k0s()())}let G=(()=>{class i{constructor(r,n,t,T,V){this._sanitizer=r,this.service=n,this.spinner=t,this.route=T,this.router=V,this.isAdd=!0,this.transporterNames=[],this.classList=["A","B","C","D","E"],this.formatfilter="dd-MMM-yyyy",this.today=new Date}ngOnInit(){this.breadCrumbItems=[{label:"Driver List",routerLink:"/driver-detail",active:!1},{label:"Add New Driver",active:!0}],this.id=this.route.snapshot.queryParams.id,this.driverForm=new s.gE({licenseNo:new s.MJ({value:this.id,disabled:!!this.id},s.k0.required),nrc:new s.MJ(""),name:new s.MJ("",s.k0.required),address:new s.MJ(""),licenseClass:new s.MJ("",s.k0.required),contactNo:new s.MJ(""),licenseExpiration:new s.MJ(null,s.k0.required),email:new s.MJ("",[s.k0.email]),remarks:new s.MJ(""),active:new s.MJ(!1),isBlack:new s.MJ("")}),this.id&&this.getDriverById()}navigateToDriver(){this.router.navigate(["master/driver"])}getDriverById(){this.spinner.show(),this.service.getDriverId(this.id).pipe((0,c.W)(r=>(0,d.of)(this.showError(r)))).subscribe(r=>{this.driverForm.controls.licenseNo.setValue(r.licenseNo),this.driverForm.controls.nrc.setValue(r.nrc),this.driverForm.controls.name.setValue(r.name),this.driverForm.controls.address.setValue(r.address),this.driverForm.controls.licenseClass.setValue(r.licenseClass),this.driverForm.controls.licenseExpiration.setValue(r.licenseExpiration),this.driverForm.controls.contactNo.setValue(r.contactNo),this.driverForm.controls.email.setValue(r.email),this.driverForm.controls.remarks.setValue(r.remarks),this.driverForm.controls.active.setValue(r.active),this.driverForm.controls.isBlack.setValue(r.isBlack),this.isAdd=!1,this.breadCrumbItems=[{label:"Driver List",rounterLink:"/driver-detail",active:!1},{label:"Edit Driver",active:!0}],this.spinner.hide()})}saveDriverList(){const r=this.driverForm.value;this.isAdd?(r.createdUser=localStorage.getItem("currentUser"),this.driverForm=r.isBlack,this.addNewDriver(r)):(r.updatedUser=localStorage.getItem("currentUser"),this.editDriver(r))}addNewDriver(r){this.spinner.show();const n={LicenseNo:r.licenseNo,NRC:r.nrc,Name:r.name,Address:r.address,LicenseClass:r.licenseClass,ContactNo:r.contactNo,Email:r.email,Remarks:r.remarks,Active:r.active,IsBlack:r.isBlack,LicenseExpiration:f()(r.licenseExpiration).format("YYYY/MM/DD")};this.service.createDriver(n).pipe((0,c.W)(t=>(0,d.of)(this.showError(t)))).subscribe(t=>{this.spinner.hide(),t.status?(this.showSuccess("Driver Added Successfully!"),this.router.navigate(["master/driver"])):(l().fire("Driver",t.messageContent,"error"),this.router.navigate(["master/driver"]))})}editDriver(r){this.spinner.show();const n={LicenseNo:this.id,NRC:r.nrc,Name:r.name,Address:r.address??"",LicenseClass:r.licenseClass,ContactNo:r.contactNo,Email:r.email??"",Remarks:r.remarks??"",Active:!!r.active,IsBlack:r.isBlack,LicenseExpiration:f()(r.licenseExpiration).format("YYYY/MM/DD")};this.service.updateDriver(n).pipe((0,c.W)(t=>(0,d.of)(this.showError(t)))).subscribe(t=>{this.spinner.hide(),t.status?(this.showSuccess("Driver Updated Successfully!"),this.router.navigate(["master/driver"])):l().fire("Driver",t.messageContent,"error")})}showSuccess(r){l().fire("Driver",r,"success")}showError(r){l().fire("Driver",r.statusText,"error")}static#e=this.\u0275fac=function(n){return new(n||i)(e.rXU(b.up),e.rXU(E),e.rXU(g.ex),e.rXU(u.nX),e.rXU(u.Ix))};static#r=this.\u0275cmp=e.VBU({type:i,selectors:[["app-driver-detail"]],standalone:!0,features:[e.aNF],decls:74,vars:11,consts:[[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[1,"col-md-6","col-lg-6","text-end"],["type","submit","class","btn btn-sm btn-primary mr-2 ",3,"disabled","click",4,"ngIf"],["routerLink","master/driver","href","master/driver",1,"btn","btn-sm","btn-secondary","m-1"],[1,"fa","fa-arrow-circle-left"],[1,"row","my-0"],[1,"form-group","col-md-4"],["class","font-weight-normal requiredfield",4,"ngIf"],["formControlName","licenseNo","tabindex","0","maxlength","50"],[4,"ngIf"],[1,"font-weight-normal"],["formControlName","nrc","placeholder","Enter NRC","autocomplete","off","tabindex","1","maxlength","100"],[1,"font-weight-normal","requiredfield"],["formControlName","name","placeholder","Enter Driver Name","autocomplete","off","tabindex","2","maxlength","100"],[1,"row","mt-2"],["formControlName","address","placeholder","Enter Address","autocomplete","off","tabindex","3","maxlength","100"],["formControlName","licenseClass","autocomplete","off","placeholder","Choose License Class","tabindex","4","maxlength","100",3,"dataSource"],["formControlName","contactNo","autocomplete","off","placeholder","Enter Contact No.","tabindex","5","maxlength","100"],["formControlName","licenseExpiration","autocomplete","off","placeholder","License Expired Date","tabindex","9","maxlength","120",3,"format"],["formControlName","email","autocomplete","off","placeholder","Enter Email","tabindex","7","maxlength","100"],["formControlName","remarks","autocomplete","off","placeholder","Remarks ","tabindex","9","maxlength","100",1,"form-control","form-control-sm"],["formControlName","active","label","Active","tabindex","8",1,"font-weight-normal"],["type","submit",1,"btn","btn-sm","btn-primary","mr-2",3,"click","disabled"],[1,"fa","fa-save"],[1,"text-danger"]],template:function(n,t){1&n&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ol",4)(5,"li",5)(6,"a",6),e.nrm(7,"i",7),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",5),e.EFF(10,"Driver"),e.k0s(),e.j41(11,"li",8),e.EFF(12,"Driver Info"),e.k0s()()()(),e.j41(13,"div",2)(14,"div",9)(15,"div",10)(16,"form",11)(17,"div",2)(18,"div",12)(19,"h5",13),e.EFF(20,"Driver Info"),e.k0s()(),e.j41(21,"div",14),e.DNE(22,I,3,1,"button",15)(23,y,3,1,"button",15),e.j41(24,"a",16),e.nrm(25,"i",17),e.EFF(26," \xa0 Back "),e.k0s()()(),e.nrm(27,"br"),e.j41(28,"div",18)(29,"div",19),e.DNE(30,L,2,0,"label",20)(31,w,2,0,"label",20),e.nrm(32,"ejs-textbox",21),e.DNE(33,A,3,0,"div",22),e.k0s(),e.j41(34,"div",19)(35,"label",23),e.EFF(36,"NRC"),e.k0s(),e.nrm(37,"ejs-textbox",24),e.k0s(),e.j41(38,"div",19)(39,"label",25),e.EFF(40,"Name"),e.k0s(),e.nrm(41,"ejs-textbox",26),e.DNE(42,R,3,0,"div",22),e.k0s()(),e.j41(43,"div",27)(44,"div",19)(45,"label",23),e.EFF(46,"Address"),e.k0s(),e.nrm(47,"ejs-textbox",28),e.k0s(),e.j41(48,"div",19)(49,"label",25),e.EFF(50,"License Class"),e.k0s(),e.nrm(51,"ejs-dropdownlist",29),e.DNE(52,M,3,0,"div",22),e.k0s(),e.j41(53,"div",19)(54,"label",23),e.EFF(55,"Contact No."),e.k0s(),e.nrm(56,"ejs-textbox",30),e.k0s()(),e.j41(57,"div",27)(58,"div",19)(59,"label",25),e.EFF(60,"License Expired Date"),e.k0s(),e.nrm(61,"ejs-datepicker",31),e.DNE(62,Y,3,0,"div",22),e.k0s(),e.j41(63,"div",19)(64,"label",23),e.EFF(65,"Email"),e.k0s(),e.nrm(66,"ejs-textbox",32),e.k0s(),e.j41(67,"div",19)(68,"label",23),e.EFF(69,"Remarks"),e.k0s(),e.nrm(70,"textarea",33),e.k0s()(),e.j41(71,"div",27)(72,"div",19),e.nrm(73,"ejs-checkbox",34),e.k0s()()()()()()()()),2&n&&(e.R7$(16),e.Y8G("formGroup",t.driverForm),e.R7$(6),e.Y8G("ngIf",t.isAdd),e.R7$(),e.Y8G("ngIf",!t.isAdd),e.R7$(7),e.Y8G("ngIf",t.isAdd),e.R7$(),e.Y8G("ngIf",!t.isAdd),e.R7$(2),e.Y8G("ngIf",t.driverForm.controls.licenseNo.invalid&&(t.driverForm.controls.licenseNo.touched||t.driverForm.controls.licenseNo.dirty)),e.R7$(9),e.Y8G("ngIf",t.driverForm.controls.name.invalid&&(t.driverForm.controls.name.touched||t.driverForm.controls.name.dirty)),e.R7$(9),e.Y8G("dataSource",t.classList),e.R7$(),e.Y8G("ngIf",t.driverForm.controls.licenseClass.invalid&&(t.driverForm.controls.licenseClass.touched||t.driverForm.controls.licenseClass.dirty)),e.R7$(9),e.Y8G("format",t.formatfilter),e.R7$(),e.Y8G("ngIf",t.driverForm.controls.licenseExpiration.invalid&&(t.driverForm.controls.licenseExpiration.touched||t.driverForm.controls.licenseExpiration.dirty)))},dependencies:[D.f,C.bT,s.qT,s.me,s.BC,s.cb,s.tU,s.j4,s.JD,k.V9,N.I,x.OV,j.$W]})}return i})()}}]);