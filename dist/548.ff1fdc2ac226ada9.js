"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[548],{2548:(b,p,s)=>{s.r(p),s.d(p,{TmsInCheckProposalComponent:()=>S});var T=s(27),r=s(9417),h=s(9437),u=s(7673),E=s(7586),f=s.n(E),D=s(8032),m=s.n(D),e=s(3953),y=s(620),g=s(6554),v=s(3782),n=s(8578),_=s(4088),C=s(3924);const I=["Grid"],P=()=>({text:"yardID",value:"yardID"});let S=(()=>{class d{constructor(t,i,o){this.service=t,this.spinner=i,this.router=o,this.pageSettings={pageSize:50},this.editSettings={allowAdding:!0,allowDeleting:!0},this.toolbar=[{text:"Add In Check",tooltipText:"Add In Check",prefixIcon:"e-icons e-add",id:"detail"},"ExcelExport","Search"],this.lines="Both",this.submitClicked=!1,this.formatfilter="MM/dd/yyyy",this.deptTypeList=["CCA","Warehouse","Rail"],this.yardList=[],this.today=new Date,this.placeholder="Select One"}ngOnInit(){this.mode="CheckBox",this.selectAllText="Select All",this.optionForm=new r.gE({fromDate:new r.MJ(sessionStorage.getItem("itmsfromDate")?sessionStorage.getItem("itmsfromDate"):this.today,r.k0.required),toDate:new r.MJ(sessionStorage.getItem("itmstoDate")?sessionStorage.getItem("itmstoDate"):this.today,r.k0.required),deptType:new r.MJ(sessionStorage.getItem("itmsdeptType")?sessionStorage.getItem("itmsdeptType").split(","):null,r.k0.required),yardID:new r.MJ(sessionStorage.getItem("itmsloc")?sessionStorage.getItem("itmsloc"):null,r.k0.required)}),this.getLocationList(),this.loadTableData()}getLocationList(){this.spinner.show(),this.service.getYardList("true").pipe((0,h.W)(t=>(0,u.of)(this.showError(t)))).subscribe(t=>{this.yardList=t,this.optionForm.controls.yardID.setValue(sessionStorage.getItem("itmsloc")?sessionStorage.getItem("itmsloc"):null),this.spinner.hide()})}loadTableData(){this.spinner.show();const t=this.optionForm.value,i=f()(t.fromDate).format("MM/DD/YYYY"),o=f()(t.toDate).format("MM/DD/YYYY");sessionStorage.setItem("itmsfromDate",i),sessionStorage.setItem("itmstoDate",o),sessionStorage.setItem("itmsdeptType",t.deptType),sessionStorage.setItem("itmsloc",t.yardID);let a="";t.deptType.length>0&&(a=this.formatParams(t.deptType)),i&&o&&a&&t.yardID&&this.service.getTMSProposalList(i,o,t.yardID,a).pipe((0,h.W)(l=>(0,u.of)(this.showError(l)))).subscribe(l=>{this.grid.dataSource=l,this.grid.searchSettings.operator="equal",this.spinner.hide()})}actionBegin(t){"add"===t.requestType&&(this.submitClicked=!1,this.router.navigate(["/tms-operation/proposal-form"])),"delete"===t.requestType&&(t.cancel=!0,this.deleteProposal(t.data[0].propNo))}formatParams(t){return t.map(i=>`'${i}'`).join(",")}deleteProposal(t){}showSuccess(t){this.spinner.hide(),m().fire("TMS Proposal",t,"success")}showError(t){this.spinner.hide(),m().fire("TMS Proposal",t.statusText,"error")}toolbarClick(t){if("Excel Export"===t.item.text&&this.grid.excelExport({fileName:"Proposal.xlsx"}),"detail"===t.item.id){let i=this.grid.getSelectedRecords();if(0==i.length)m().fire("TMS Proposal","Please select one row!","warning");else if("detail"===t.item.id)return void this.router.navigate(["/tms-operation/tms-in-check-proposal-doc"],{queryParams:{poNo:i[0].propNo,id:null,truck:null,type:null}})}}static#e=this.\u0275fac=function(i){return new(i||d)(e.rXU(y.$),e.rXU(g.ex),e.rXU(v.Ix))};static#t=this.\u0275cmp=e.VBU({type:d,selectors:[["app-tms-in-check-proposal"]],viewQuery:function(i,o){if(1&i&&e.GBs(I,5),2&i){let a;e.mGM(a=e.lsd())&&(o.grid=a.first)}},standalone:!0,features:[e.aNF],decls:69,vars:21,consts:[["Grid",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-12","col-lg-12","text-left"],[3,"formGroup"],[1,"row","btns","mb-2"],[1,"col-lg-4","col-12"],["for","fromDate",1,"col-sm-4","col-form-label","requiredfield"],[1,"col-sm-8","p-0"],["formControlName","fromDate","floatLabelType","Always",3,"format"],[1,"col-lg-5","col-12"],["for","toDate",1,"col-sm-4","col-form-label","requiredfield"],[1,"col-sm-7","p-0"],["formControlName","toDate","floatLabelType","Always",3,"format"],[1,"row","mb-2"],[1,"col-sm-4","col-form-label","requiredfield"],["formControlName","yardID","placeholder","Select One","tabindex","3",3,"dataSource","fields"],["formControlName","deptType","tabindex","4","showSelectAll","true",3,"dataSource","mode","placeholder","selectAllText"],[1,"col-lg-2","col-12","justify-content-end"],["type","button",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"fas","fa-eye"],[3,"actionBegin","toolbarClick","dataSource","allowResizing","allowSorting","allowPaging","pageSettings","editSettings","allowExcelExport","toolbar","gridLines"],["field","yard","headerText","Yard","width","150"],["field","estDate","headerText","Estimate Date","width","130"],["field","jobCode","headerText","JobCode","width","100"],["field","jobDept","headerText","JobDept","width","200"],["field","jobType","headerText","JobType","width","100"],["field","noOfTruck","headerText","NoOfTruck","width","100"],["field","noOfTEU","headerText","NoOfTEU","width","100"],["field","noOfFEU","headerText","NoOfFEU","width","100"],["field","lclQty","headerText","LCLQty","width","100"],["field","customerName","headerText","Customer Name","width","250"],["field","companyName","headerText","Company","width","250"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"ol",5)(5,"li",6)(6,"a",7),e.nrm(7,"i",8),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",6),e.EFF(10,"In Check"),e.k0s(),e.j41(11,"li",9),e.EFF(12,"TMS Proposal"),e.k0s()()()(),e.j41(13,"div",3)(14,"div",10)(15,"div",11)(16,"h5",12),e.EFF(17,"TMS Proposal"),e.k0s()(),e.j41(18,"div",13)(19,"div",3)(20,"div",14)(21,"Form",15)(22,"div",16)(23,"div",17)(24,"div",3)(25,"label",18),e.EFF(26,"Date:"),e.k0s(),e.j41(27,"div",19),e.nrm(28,"ejs-datepicker",20),e.k0s()()(),e.j41(29,"div",21)(30,"div",3)(31,"label",22),e.EFF(32,"To:"),e.k0s(),e.j41(33,"div",23),e.nrm(34,"ejs-datepicker",24),e.k0s()()()(),e.j41(35,"div",25)(36,"div",17)(37,"div",3)(38,"label",26),e.EFF(39,"Yard:"),e.k0s(),e.j41(40,"div",19),e.nrm(41,"ejs-dropdownlist",27),e.k0s()()(),e.j41(42,"div",21)(43,"div",3)(44,"label",26),e.EFF(45,"Dept Type:"),e.k0s(),e.j41(46,"div",19),e.nrm(47,"ejs-multiselect",28),e.k0s()()(),e.j41(48,"div",29)(49,"button",30),e.bIt("click",function(){return e.eBV(a),e.Njj(o.loadTableData())}),e.nrm(50,"i",31),e.EFF(51," \xa0 View "),e.k0s()()()()()(),e.j41(52,"ejs-grid",32,0),e.bIt("actionBegin",function(c){return e.eBV(a),e.Njj(o.actionBegin(c))})("toolbarClick",function(c){return e.eBV(a),e.Njj(o.toolbarClick(c))}),e.j41(54,"e-columns"),e.nrm(55,"e-column",33)(56,"e-column",34)(57,"e-column",35)(58,"e-column",36)(59,"e-column",37)(60,"e-column",38)(61,"e-column",39)(62,"e-column",40)(63,"e-column",41)(64,"e-column",42)(65,"e-column",43),e.k0s()()()()()()(),e.j41(66,"ngx-spinner",44)(67,"p",45),e.EFF(68," Loading... "),e.k0s()()}2&i&&(e.R7$(21),e.Y8G("formGroup",o.optionForm),e.R7$(7),e.Y8G("format",o.formatfilter),e.R7$(6),e.Y8G("format",o.formatfilter),e.R7$(7),e.Y8G("dataSource",o.yardList)("fields",e.lJ4(20,P)),e.R7$(6),e.Y8G("dataSource",o.deptTypeList)("mode",o.mode)("placeholder",o.placeholder)("selectAllText",o.selectAllText),e.R7$(2),e.Y8G("disabled",!o.optionForm.valid),e.R7$(3),e.Y8G("dataSource",o.data)("allowResizing",!0)("allowSorting",!0)("allowPaging",!0)("pageSettings",o.pageSettings)("editSettings",o.editSettings)("allowExcelExport",!0)("toolbar",o.toolbar)("gridLines",o.lines),e.R7$(14),e.Y8G("fullScreen",!0))},dependencies:[T.Q,r.BC,r.cb,r.j4,r.JD,n._ab,n.eeu,n.rFS,n.LGG,n.cvh,_.V9,C.I,_.b3,g.et]})}return d})()}}]);