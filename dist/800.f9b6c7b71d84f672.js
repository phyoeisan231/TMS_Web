"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[800],{6800:(H,g,l)=>{l.r(g),l.d(g,{TrailerComponent:()=>W});var u=l(9437),f=l(7673),C=l(8032),c=l.n(C),j=l(7037),r=l(9417),B=l(7586),k=l.n(B),e=l(3953),v=l(1626),h=l(2525);const b={headers:new v.Lr({"Content-Type":"application/json"})};let D=(()=>{class i{constructor(t){this.http=t}getTrailerList(){return this.http.get(h.c.url+"Master/GetTrailerList")}onBlackForm(t){return this.http.put(h.c.url+"Master/BlackFormForTrailer/",t,b)}deleteTrailer(t){return this.http.delete(h.c.url+"Master/DeleteTrailer/"+t,b)}static#e=this.\u0275fac=function(a){return new(a||i)(e.KVO(v.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var T=l(6554),F=l(3782),w=l(177),d=l(8578),y=l(3924),R=l(6674),E=l(5029);const x=["Grid"],N=["blackModal"];function S(i,n){1&i&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function _(i,n){1&i&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function I(i,n){if(1&i&&e.DNE(0,S,2,0,"div",39)(1,_,2,0,"ng-template",null,5,e.C5r),2&i){const t=n.$implicit,a=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",a)}}function M(i,n){1&i&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function G(i,n){1&i&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function Y(i,n){if(1&i&&e.DNE(0,M,2,0,"div",39)(1,G,2,0,"ng-template",null,5,e.C5r),2&i){const t=n.$implicit,a=e.sdS(2);e.Y8G("ngIf",t.isBlack)("ngIfElse",a)}}function L(i,n){1&i&&(e.j41(0,"div",40),e.EFF(1,"Is Black Form"),e.k0s())}function V(i,n){1&i&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Black Date"),e.k0s(),e.nrm(3,"ejs-datepicker",43),e.k0s())}function $(i,n){1&i&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Black Removed Date"),e.k0s(),e.nrm(3,"ejs-datepicker",44),e.k0s())}function A(i,n){1&i&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Black Reason"),e.k0s(),e.nrm(3,"textarea",45),e.k0s())}function J(i,n){1&i&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Black Removed Reason"),e.k0s(),e.nrm(3,"textarea",46),e.k0s())}function P(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",47),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onBlackFormSubmit())}),e.EFF(1,"Save"),e.k0s(),e.j41(2,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.hideDialog())}),e.EFF(3,"Cancel"),e.k0s()}}let W=(()=>{class i{constructor(t,a,o){this.service=t,this.spinner=a,this.router=o,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!1,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=[{text:"Add",tooltipText:"Add",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"e-edit",id:"edit"},{text:"IsBlack",tooltipText:"IsBlack",prefixIcon:"e-circle-check",id:"isblack"},"Delete","Search"],this.lines="Both",this.submitClicked=!1,this.isBlack=!0,this.isShow=!0}ngOnInit(){this.blackForm=new r.gE({vehicleRegNo:new r.MJ(""),isBlack:new r.MJ(!1),blackReason:new r.MJ(""),blackDate:new r.MJ(""),blackRemovedReason:new r.MJ(""),blackRemovedDate:new r.MJ("")}),this.loadTableData()}loadTableData(){this.spinner.show(),this.service.getTrailerList().pipe((0,u.W)(t=>(0,f.of)(this.showError(t)))).subscribe(t=>{this.grid.dataSource=t,this.grid.searchSettings.operator="equal",this.spinner.hide()})}rowDataBound(t){t.row&&1==t.data.isBlack&&t.row.classList.add("not-Use")}actionBegin(t){"delete"===t.requestType&&(t.cancel=!0,this.deleteTrailer(t.data[0].vehicleRegNo))}deleteTrailer(t){c().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(a=>{a.value?(this.spinner.show(),this.service.deleteTrailer(t).pipe((0,u.W)(o=>(0,f.of)(this.showError(o)))).subscribe(o=>{1==o.status?(this.showSuccess(o.messageContent),this.loadTableData()):(this.spinner.hide(),c().fire("Trailer",o.messageContent,"error"))})):a.dismiss===c().DismissReason.cancel&&c().close()})}showSuccess(t){this.spinner.hide(),c().fire("Trailer",t,"success")}showError(t){this.spinner.hide(),c().fire("Trailer",t.statusText,"error")}openDialog(){this.blackModal.show()}hideDialog(){this.blackModal.hide()}onBlackFormSubmit(){this.spinner.show();const t=this.blackForm.value;t.isBlack=!!t.isBlack,1==t.isBlack?(t.blackRemovedDate=null,t.blackRemovedReason=null,t.blackReason=t.blackReason,t.blackDate=k()(t.blackDate).format("MM/DD/YYYY HH:mm:ss")):(t.blackDate=null,t.blackReason=null,t.blackRemovedReason=t.blackRemovedReason,t.blackRemovedDate=k()(t.blackRemovedDate).format("MM/DD/YYYY HH:mm:ss")),this.hideDialog(),console.log(t),this.service.onBlackForm(t).pipe((0,u.W)(a=>(0,f.of)(this.showError(a)))).subscribe(a=>{1==a.status?(c().fire("Trailer Black Form",a.messageContent,"success"),this.loadTableData()):c().fire("Trailer Black Form",a.messageContent,"error")}),this.spinner.hide()}toolbarClick(t){if("Excel Export"===t.item.text)this.grid.excelExport();else if("add"===t.item.id)this.router.navigate(["master/trailer-detail"],{queryParams:{id:null},skipLocationChange:!0});else if("edit"===t.item.id||"isblack"===t.item.id){let o=this.grid.getSelectedRecords();if(0==o.length)c().fire("Trailer","Please select one row!","warning");else{var a=o[0].vehicleRegNo;if("edit"===t.item.id)this.router.navigate(["master/trailer-detail"],{queryParams:{id:a},skipLocationChange:!0});else if("isblack"===t.item.id){this.blackForm.reset();const s=o[0].isBlack;this.blackForm.controls.vehicleRegNo.setValue(a),this.blackForm.controls.isBlack.setValue(s),this.isShow=1!=s,this.blackModal.show()}}}}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(D),e.rXU(T.ex),e.rXU(F.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-trailer"]],viewQuery:function(a,o){if(1&a&&(e.GBs(x,5),e.GBs(N,5)),2&a){let s;e.mGM(s=e.lsd())&&(o.grid=s.first),e.mGM(s=e.lsd())&&(o.blackModal=s.first)}},standalone:!0,features:[e.aNF],decls:58,vars:15,consts:[["Grid",""],["template",""],["blackModal",""],["header",""],["footerTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","true"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-primary"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-6","col-lg-6","text-left"],[1,"card-title"],[3,"actionBegin","toolbarClick","rowDataBound","allowSorting","allowPaging","pageSettings","editSettings","toolbar","gridLines"],["field","vehicleRegNo","headerText","RegNo","width","150",3,"isPrimaryKey"],["field","containerType","headerText","Container Type","width","200"],["field","transporterID","headerText","Transporter","width","150"],["field","trailerWeight","headerText","Trailer Weight","width","150"],["field","createdDate","headerText","Created Date","type","date","format","dd-MM-yyyy","width","130"],["field","active","headerText","Active","width","100"],["field","isBlack","headerText","IsBlack","width","90"],["isModal","true","width","480px","allowDragging","true",3,"showCloseIcon","visible"],[3,"ngSubmit","formGroup"],["hidden","",1,"form-group","col-md-12"],[1,"e-float-input","e-control-wrapper"],["formControlName","vehicleRegNo","type","text","readonly","true","autocomplete","off"],[1,"e-float-line"],["for","vehicleRegNo",1,"e-float-text","e-label-top"],[1,"row","my-0"],[1,"form-group","col-md-6"],["formControlName","isBlack","label","IsBlack","floatLabelType","Always","tabindex","1",1,"font-weight-normal",3,"checked"],["class","form-group col-md-12",4,"ngIf"],["type","ball-scale-multiple"],[4,"ngIf","ngIfElse"],[1,"font-weight-bold"],[1,"form-group","col-md-12"],[1,"col"],["formControlName","blackDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackRemovedDate","autocomplete","off","type","date","format","dd-MMM-yyyy","tabindex","2"],["formControlName","blackReason","autocomplete","off","tabindex","3",1,"form-control","form-control-sm"],["formControlName","blackRemovedReason","autocomplete","off","tabindex","4",1,"form-control","form-control-sm"],["type","submit","ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-primary","e-flat",3,"click"],["ejs-button","",1,"e-edit-dialog","e-control","e-btn","e-lib","e-flat",3,"click"]],template:function(a,o){if(1&a){const s=e.RV6();e.j41(0,"section",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"ol",10)(5,"li",11)(6,"a",12),e.nrm(7,"i",13),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",14),e.EFF(10,"Trailer"),e.k0s()()()(),e.j41(11,"div",8)(12,"div",15)(13,"div",16)(14,"div",8)(15,"div",17)(16,"h5",18),e.EFF(17,"Trailer"),e.k0s()()(),e.j41(18,"ejs-grid",19,0),e.bIt("actionBegin",function(m){return e.eBV(s),e.Njj(o.actionBegin(m))})("toolbarClick",function(m){return e.eBV(s),e.Njj(o.toolbarClick(m))})("rowDataBound",function(m){return e.eBV(s),e.Njj(o.rowDataBound(m))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",20)(22,"e-column",21)(23,"e-column",22)(24,"e-column",23)(25,"e-column",24),e.j41(26,"e-column",25),e.DNE(27,I,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(29,"e-column",26),e.DNE(30,Y,3,2,"ng-template",null,1,e.C5r),e.k0s()()()()()()()(),e.j41(32,"ejs-dialog",27,2),e.DNE(34,L,2,0,"ng-template",null,3,e.C5r),e.j41(36,"form",28),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(o.onBlackFormSubmit())}),e.j41(37,"div",29)(38,"div",30),e.nrm(39,"input",31)(40,"span",32),e.j41(41,"label",33),e.EFF(42,"VehicleRegNo"),e.k0s()()(),e.j41(43,"div",34)(44,"div",35),e.nrm(45,"br")(46,"ejs-checkbox",36),e.k0s()(),e.j41(47,"div",8),e.DNE(48,V,4,0,"div",37),e.k0s(),e.j41(49,"div",8),e.DNE(50,$,4,0,"div",37),e.k0s(),e.j41(51,"div",8),e.DNE(52,A,4,0,"div",37),e.k0s(),e.j41(53,"div",8),e.DNE(54,J,4,0,"div",37),e.k0s(),e.DNE(55,P,4,0,"ng-template",null,4,e.C5r),e.k0s()(),e.nrm(57,"ngx-spinner",38)}2&a&&(e.R7$(18),e.Y8G("allowSorting",!0)("allowPaging",!0)("pageSettings",o.pageSettings)("editSettings",o.editSettings)("toolbar",o.toolbar)("gridLines",o.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(11),e.Y8G("showCloseIcon",!0)("visible",!1),e.R7$(4),e.Y8G("formGroup",o.blackForm),e.R7$(10),e.Y8G("checked",!0),e.R7$(2),e.Y8G("ngIf",o.isShow),e.R7$(2),e.Y8G("ngIf",!o.isShow),e.R7$(2),e.Y8G("ngIf",o.isShow),e.R7$(2),e.Y8G("ngIf",!o.isShow))},dependencies:[j.f,w.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,d._ab,d.eeu,d.rFS,d.LGG,d.cvh,y.I,R.mq,E.$W,T.et]})}return i})()}}]);