"use strict";(self.webpackChunktms_gate=self.webpackChunktms_gate||[]).push([[551],{1551:(N,y,n)=>{n.r(y),n.d(y,{TransporterTypeComponent:()=>I});var b=n(7037),u=n(9437),m=n(7673),C=n(2265),s=n(9417),w=n(8032),a=n.n(w),e=n(3953),g=n(1626),h=n(2525);const T={headers:new g.Lr({"Content-Type":"application/json"})};let D=(()=>{class i{constructor(t){this.http=t}getTransporterTypes(t){return this.http.get(h.c.url+"Master/GetTransporterTypeList/?active="+t)}createTransporterType(t){return this.http.post(h.c.url+"Master/SaveTransporterType",t,T)}updateTransporterType(t){return this.http.put(h.c.url+"Master/UpdateTransporterType/",t,T)}deleteTransporterType(t){return this.http.delete(h.c.url+"Master/DeleteTransporterType/"+t,T)}static#e=this.\u0275fac=function(r){return new(r||i)(e.KVO(g.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var v=n(6554),j=n(177),d=n(8578),E=n(7808),F=n(5029);const x=["Grid"];function k(i,c){1&i&&(e.j41(0,"div"),e.EFF(1,"Yes"),e.k0s())}function B(i,c){1&i&&(e.j41(0,"div"),e.EFF(1,"No"),e.k0s())}function S(i,c){if(1&i&&e.DNE(0,k,2,0,"div",23)(1,B,2,0,"ng-template",null,3,e.C5r),2&i){const t=c.$implicit,r=e.sdS(2);e.Y8G("ngIf",t.active)("ngIfElse",r)}}function G(i,c){if(1&i&&(e.j41(0,"form",24)(1,"div",25)(2,"div",26)(3,"label",27),e.EFF(4,"Type ID"),e.k0s(),e.nrm(5,"ejs-textbox",28),e.j41(6,"div")(7,"label",29),e.EFF(8,"*Type ID is required"),e.k0s()()(),e.j41(9,"div",26)(10,"label",30),e.EFF(11,"Description"),e.k0s(),e.nrm(12,"ejs-textbox",31),e.j41(13,"div")(14,"label",32),e.EFF(15,"*Type Name is required"),e.k0s()()()(),e.j41(16,"div",25)(17,"div",33),e.nrm(18,"br")(19,"ejs-checkbox",34),e.k0s()()()),2&i){const t=c.$implicit,r=e.XpG();e.Y8G("formGroup",r.transForm),e.R7$(5),e.Y8G("readonly",!t.isAdd),e.R7$(),e.xc7("visibility",r.validateControl("typeID")?"visible":"hidden"),e.R7$(6),e.Y8G("readonly",!t.isAdd),e.R7$(),e.xc7("visibility",r.validateControl("description")?"visible":"hidden"),e.R7$(6),e.Y8G("checked",!0)}}let I=(()=>{class i{constructor(t,r){this.service=t,this.spinner=r,this.pageSettings={pageSize:10},this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete","ExcelExport","Search"],this.lines="Both",this.submitClicked=!1}ngOnInit(){this.loadTableData()}rowDataBound(t){t.row&&1!=t.data.active&&t.row.classList.add("not-Use")}loadTableData(){this.spinner.show(),this.service.getTransporterTypes("All").pipe((0,u.W)(t=>(0,m.of)(this.showError(t)))).subscribe(t=>{this.grid.dataSource=t,this.spinner.hide()}),this.spinner.hide()}actionBegin(t){if(("add"===t.requestType||"beginEdit"===t.requestType)&&(this.submitClicked=!1,this.transForm=this.createFormGroup(t.rowData)),"save"===t.requestType)if(this.submitClicked=!0,this.transForm.valid){let r=this.transForm.value;"add"===t.action?(r.createdUser=localStorage.getItem("currentUser"),this.addTransporterType(r)):(r.updatedUser=localStorage.getItem("currentUser"),this.editTransporterType(r))}else t.cancel=!0;"delete"===t.requestType&&(t.cancel=!0,this.deleteTransporterType(t.data[0].typeID))}actionComplete(t){("beginEdit"===t.requestType||"add"===t.requestType)&&(t.dialog.header="add"===t.requestType?"New Transporter Type":"Edit Transporter Type",C.Browser.isDevice&&(t.dialog.height=window.innerHeight-90+"px",t.dialog.dataBind()))}createFormGroup(t){return new s.gE({typeID:new s.MJ(t.typeID,s.k0.required),description:new s.MJ(t.description,s.k0.required),remarks:new s.MJ(t.remarks),active:new s.MJ(t.active)})}addTransporterType(t){this.spinner.show(),this.service.createTransporterType(t).pipe((0,u.W)(r=>(0,m.of)(this.showError(r)))).subscribe(r=>{1==r.status?(this.spinner.hide(),a().fire("Transporter Type",r.messageContent,"success"),this.loadTableData()):(this.spinner.hide(),a().fire("Transporter Type",r.messageContent,"error"))})}editTransporterType(t){this.spinner.show(),this.service.updateTransporterType(t).pipe((0,u.W)(r=>(0,m.of)(this.showError(r)))).subscribe(r=>{this.loadTableData(),1==r.status?this.showSuccess(r.messageContent):(this.spinner.hide(),a().fire("Transporter Type",r.messageContent,"error"))})}deleteTransporterType(t){a().fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"No, keep it",confirmButtonText:"Yes, I am sure!"}).then(r=>{r.value?(this.spinner.show(),this.service.deleteTransporterType(t).pipe((0,u.W)(o=>(0,m.of)(this.showError(o)))).subscribe(o=>{1==o.status?(this.showSuccess(o.messageContent),this.loadTableData()):(this.spinner.hide(),a().fire("Transporter Type",o.messageContent,"error"))})):r.dismiss===a().DismissReason.cancel&&a().close()})}validateControl(t){const r=this.transForm.get(t);return r.invalid&&(r.dirty||r.touched)||r.invalid&&this.submitClicked}showSuccess(t){this.spinner.hide(),a().fire("Transporter Type",t,"success")}showError(t){this.spinner.hide(),a().fire("Transporter Type",t.statusText,"error")}toolbarClick(t){"Excel Export"===t.item.text&&this.grid.excelExport({fileName:"TruckTypeReport.xlsx"})}static#e=this.\u0275fac=function(r){return new(r||i)(e.rXU(D),e.rXU(v.ex))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-transporter-type"]],viewQuery:function(r,o){if(1&r&&e.GBs(x,5),2&r){let l;e.mGM(l=e.lsd())&&(o.grid=l.first)}},standalone:!0,features:[e.aNF],decls:31,vars:10,consts:[["Grid",""],["template",""],["editSettingsTemplate",""],["False",""],[1,"content","mt-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/","routerLinkActive","active"],[1,"nav-icon","fas","fa-tachometer-alt"],[1,"breadcrumb-item","active","text-info"],[1,"card","card-primary","card-outline"],[1,"card-body"],[1,"col-md-12","col-lg-12","text-left"],[1,"card-title"],[3,"actionBegin","actionComplete","toolbarClick","rowDataBound","allowResizing","allowSorting","allowPaging","pageSettings","editSettings","allowExcelExport","toolbar","gridLines"],["field","typeID","headerText","ID","width","90",3,"isPrimaryKey"],["field","description","headerText","Description","width","150"],["field","active","headerText","Active","width","100"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-12"],["for","typeID",1,"font-weight-normal","requiredfield"],["formControlName","typeID","tabindex","1","autocomplete","off",3,"readonly"],["for","typeID",1,"e-error",2,"display","block"],["for","description",1,"font-weight-normal","requiredfield"],["formControlName","description","tabindex","2","autocomplete","off",3,"readonly"],["for","description",1,"e-error",2,"display","block"],[1,"form-group","col-md-6"],["formControlName","active","label","Active","floatLabelType","Always","tabindex","3",3,"checked"]],template:function(r,o){if(1&r){const l=e.RV6();e.j41(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"ol",8)(5,"li",9)(6,"a",10),e.nrm(7,"i",11),e.EFF(8,"\xa0Dashboard"),e.k0s()(),e.j41(9,"li",12),e.EFF(10,"Transporter Type"),e.k0s()()()(),e.j41(11,"div",6)(12,"div",13)(13,"div",14)(14,"div",6)(15,"div",15)(16,"h5",16),e.EFF(17,"Transporter Type"),e.k0s()()(),e.j41(18,"ejs-grid",17,0),e.bIt("actionBegin",function(p){return e.eBV(l),e.Njj(o.actionBegin(p))})("actionComplete",function(p){return e.eBV(l),e.Njj(o.actionComplete(p))})("toolbarClick",function(p){return e.eBV(l),e.Njj(o.toolbarClick(p))})("rowDataBound",function(p){return e.eBV(l),e.Njj(o.rowDataBound(p))}),e.j41(20,"e-columns"),e.nrm(21,"e-column",18)(22,"e-column",19),e.j41(23,"e-column",20),e.DNE(24,S,3,2,"ng-template",null,1,e.C5r),e.k0s()(),e.DNE(26,G,20,8,"ng-template",null,2,e.C5r),e.k0s()()()()()(),e.j41(28,"ngx-spinner",21)(29,"p",22),e.EFF(30," Loading... "),e.k0s()()}2&r&&(e.R7$(18),e.Y8G("allowResizing",!0)("allowSorting",!0)("allowPaging",!0)("pageSettings",o.pageSettings)("editSettings",o.editSettings)("allowExcelExport",!0)("toolbar",o.toolbar)("gridLines",o.lines),e.R7$(3),e.Y8G("isPrimaryKey",!0),e.R7$(7),e.Y8G("fullScreen",!0))},dependencies:[b.f,j.bT,s.qT,s.BC,s.cb,s.j4,s.JD,d._ab,d.eeu,d.rFS,d.LGG,d.cvh,E.OV,F.$W,v.et]})}return i})()}}]);